<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<link rel="stylesheet" href="/styles/app.css" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../_app/immutable/assets/0.Bs5QCvu5.css" rel="stylesheet">
		<link href="../_app/immutable/assets/3.KdkzbpVi.css" rel="stylesheet">
		<link href="../_app/immutable/assets/ArticleMeta.VMQ7KKaF.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.CXgIfTXn.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/entry.CAsn5CxL.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.B-IchvsE.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control.CYgJF_JY.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.B4Mf3DZh.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.D6kgxu3v.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.BXAsoQ_g.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.Dv8jq0v4.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/each.D6YF6ztN.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/3.BRDOs9Z0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.CzR0xuCU.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/PageHead.lOwxy8xl.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/ArticleMeta.CnvR0XDo.js"><title>Record type in Dart | SvelteKit + MDsveX Blog</title><!-- HEAD_svelte-1jfag13_START --><meta property="og:site_name" content="SvelteKit + MDsveX Blog"><meta property="og:title" content="Record type in Dart"><meta property="og:description" content="Record type에 대해 알아봅니다."><!-- HEAD_svelte-1jfag13_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">  <div class="header-container svelte-8sye89"><div class="sidebarNavBtn svelte-8sye89"><button data-svelte-h="svelte-1w5a5mz"><i class="fa-solid fa-bars"></i></button></div>   <div class="svelte-149edha"><a href="/"><h1 class="small" data-svelte-h="svelte-9gkbac">Jack.dev.blog</h1></a> </div></div> <div class="sidebar-and-main svelte-8sye89"><div class="sidebar-container svelte-8sye89"><aside class="w-64" aria-label="Sidebar"><div class="overflow-y-auto py-4 px-3 bg-gray-50 rounded dark:bg-gray-800"><ul class="space-y-2 list-none"><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Dart"> <span class="ms-3">Dart</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Flutter"> <span class="ms-3">Flutter</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/SvelteKit"> <span class="ms-3">SvelteKit</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Mdsvex"> <span class="ms-3">Mdsvex</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Github"> <span class="ms-3">Github</span> </a></li>  <hr></ul> </div> </aside> </div> <div class="main svelte-8sye89"> <div class="metadata svelte-1nrt46a"><h2 class="heading svelte-1ujuesn large" id="record-type-in-dart"><a href="#record-type-in-dart">Record type in Dart</a></h2> <p class="svelte-1uy9i9h"><div class="tags svelte-1uy9i9h"><span data-svelte-h="svelte-190wkx9">Tags:</span> <div class="tag-items-container svelte-1uy9i9h"><span class="tag svelte-1uy9i9h">Dart</span></div></div></p> <div class="metadata svelte-1uy9i9h"><span class="date svelte-1uy9i9h">2024. 09. 23. (Mon)</span> </div></div> <div class="component svelte-1nrt46a"><nav class="toc" data-svelte-h="svelte-r3j3b"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#record란">Record란?</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#syntax">syntax</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#record-값-접근">Record 값 접근</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#record는-언제-쓰면-좋을까">Record는 언제 쓰면 좋을까?</a></li></ol></nav> <h1 id="record란" data-svelte-h="svelte-16k4zgn">Record란?</h1> <p data-svelte-h="svelte-1qocoek">Record는 Dart 3.0 이상의 버전에서 사용할 수 있는 type입니다.</p> <p data-svelte-h="svelte-1lpeas1">Record는 다음과 같은 특징을 갖습니다.</p> <ul data-svelte-h="svelte-6yzkv"><li><strong>anonymous</strong>: anonymous function (혹은 lambda function) 처럼 이름이 없는 익명으로 사용됩니다.</li> <li><strong>immutable</strong>: 불변 타입입니다. 따라서 setter가 없고 타입이 고정됩니다(<strong>fixed-type</strong>).</li> <li><strong>aggregate</strong>: 하나의 record 안에 여러 개의 data type을 담을 수 있습니다. 이 성질을 <strong>heterogeneous</strong> 하다고도 표현합니다.</li></ul> <hr> <h2 id="syntax" data-svelte-h="svelte-1yujlm">syntax</h2> <p data-svelte-h="svelte-djdfua"><strong>Record expression</strong>(표현식)은 소괄호()를 이용해 선언하며 comma 를 이용해 각 필드를 구분합니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token comment">// anonymous, immutable, aggregate 한 특징을 갖는다는 것을 상기해봅시다.</span>
<span class="token keyword">var</span> record <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'first'</span></span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'jack'</span></span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'last'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1xvm0pd"><strong>Record type annotation</strong> 은 표현식과 마찬가지로 소괄호와 comma를 사용해 함수의 return type이나 parameter type을 정해줄 수 있습니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token punctuation">(</span>int<span class="token punctuation">,</span> int<span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token punctuation">(</span>int<span class="token punctuation">,</span> int<span class="token punctuation">)</span> record<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=</span> record<span class="token punctuation">;</span> <span class="token comment">// destructuring using record pattern.</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>b<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-no5hp0">Record type annotation 사용시 함수를 선언할 때 처럼 named field를 사용할 수 있습니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>int a<span class="token punctuation">,</span> int b<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> recordAB<span class="token punctuation">;</span>

recordAB <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1hb2u0u">위처럼 선언된 record의 <strong>type</strong>은 named field들의 name에도 영향을 받습니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>int x<span class="token punctuation">,</span> int y<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> recordXY<span class="token punctuation">;</span>
recordXY <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// recordAB = recordXY // compile error</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1qhtdj1">recordAB와 recordXY는 서로 다른 이름의 name field를 갖기 때문에 서로 다른 타입으로 취급되고 recordAB에 recordXY를 할당하려 하면 컴파일 에러가 납니다.</p> <p data-svelte-h="svelte-5q9zpx">반면 위와 같은 상황에서 named field가 아닌 positional field를 사용하면 정상적으로 작동합니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token punctuation">(</span>int a<span class="token punctuation">,</span> int b<span class="token punctuation">)</span> recordAB <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>int x<span class="token punctuation">,</span> int y<span class="token punctuation">)</span> recordXY <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>

recordAB <span class="token operator">=</span> recordXY<span class="token punctuation">;</span> <span class="token comment">// recordAB and recordXY is considred the same type.</span></code><!-- HTML_TAG_END --></pre> <blockquote data-svelte-h="svelte-haby2x"><p><strong>Question</strong> : Record는 immutable 하다고 하지 않았었나요? <code>recordAB = recordXY</code> 부분은 뭔가요?</p> <p><strong>Answer</strong>: immutable 하다라는 것은 recordAB의 개별값을 직접 바꿀 수 없다는 것입니다. 위처럼 같은 타입의 새로운 record를 할당하는 것은 가능합니다.</p> <p><code>recordAB.$1 = 3 // Error</code></p> <p><code>recordAB.a = 3 // Error</code></p></blockquote> <h2 id="record-값-접근" data-svelte-h="svelte-mkcamy">Record 값 접근</h2> <p data-svelte-h="svelte-edr4gm">Record는 2가지 방식으로 값에 접근이 가능합니다.</p> <ul data-svelte-h="svelte-j76489"><li><strong>positional field access</strong></li> <li><strong>named field access</strong></li></ul> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">var</span> record <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'first'</span></span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'jack'</span></span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'last'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// positional access through $</span>
<span class="token function">print</span><span class="token punctuation">(</span>record<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Prints 'first'</span>
<span class="token function">print</span><span class="token punctuation">(</span>record<span class="token punctuation">.</span>$<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Prints 'last'</span>

<span class="token comment">// named access through field names</span>
<span class="token function">print</span><span class="token punctuation">(</span>record<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Prints 'jack'</span>
<span class="token function">print</span><span class="token punctuation">(</span>record<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Prints 30</span></code><!-- HTML_TAG_END --></pre> <h1 id="record는-언제-쓰면-좋을까" data-svelte-h="svelte-1ks32g8">Record는 언제 쓰면 좋을까?</h1> <p data-svelte-h="svelte-1yv4oof">Dart에서 Record를 사용하는 가장 대표적인 경우는 Multiple return입니다.</p> <p data-svelte-h="svelte-1x9jn2s">보통은 함수가 하나의 반환값을 갖지만 여러 개의 값을 반환하는 함수가 유용한 경우가 있습니다.</p> <p data-svelte-h="svelte-1x6668v">예를 들어 json에서 값을 추출하여 가공하는 경우를 생각해 보겠습니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token comment">// fetch json that has name and age as its field.</span>
<span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token keyword">dynamic</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// fetch the json data</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">return</span> json<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">var</span> jsonData <span class="token operator">=</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> jsonData<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'name'</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> jsonData<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'age'</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Do something with the name and age.</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-g5o06b">name 과 age를 json으로 받아 가공하는 함수입니다.</p> <p data-svelte-h="svelte-1jfp2fi">만약 fetchData 함수가 json을 반환하는게 아니라 바로 name과 age를 반환하게 하면 어떨까요?</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token class-name">Future</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">,</span> int<span class="token punctuation">)</span><span class="token operator">></span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// fetch the json data</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>json<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'name'</span></span><span class="token punctuation">]</span> <span class="token operator">as</span> <span class="token class-name">String</span><span class="token punctuation">,</span> json<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'age'</span></span><span class="token punctuation">]</span> <span class="token operator">as</span> int<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">final</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1ie0yos">코드가 좀 더 간결해지고 type safety를 보장해주는 효과가 있습니다.</p> <p data-svelte-h="svelte-8a1lis">Record가 아닌 List나 Set같은 type들로도 multiple return을 구현할 수 있지만 type safety를 보장해주지 않습니다.</p> </div></div> </div> 
			
			<script>
				{
					__sveltekit_fanivm = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{tags:new Set(["Dart","Flutter","SvelteKit","Mdsvex","Github"])},"uses":{}},null];

					Promise.all([
						import("../_app/immutable/entry/start.CXgIfTXn.js"),
						import("../_app/immutable/entry/app.B4Mf3DZh.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
	<script src="https://kit.fontawesome.com/56837ace2e.js" crossorigin="anonymous"></script>
</html>
