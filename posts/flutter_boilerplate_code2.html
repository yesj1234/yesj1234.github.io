<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="../favicon.png" />
		<link rel="stylesheet" href="/styles/app.css" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../_app/immutable/assets/0.Bs5QCvu5.css" rel="stylesheet">
		<link href="../_app/immutable/assets/3.KdkzbpVi.css" rel="stylesheet">
		<link href="../_app/immutable/assets/ArticleMeta.VMQ7KKaF.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.D4ozfrvD.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/entry.D9kNpHO7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/scheduler.B-IchvsE.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control.CYgJF_JY.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.BF-DqGET.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.D6kgxu3v.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.BXAsoQ_g.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.RTdsLqJP.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/each.D6YF6ztN.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/3.BgZSdobU.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.CzR0xuCU.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/PageHead.lOwxy8xl.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/ArticleMeta.CnvR0XDo.js"><title>new Flutter project의 main.dart 코드 파헤쳐보기(2) | SvelteKit + MDsveX Blog</title><!-- HEAD_svelte-1jfag13_START --><meta property="og:site_name" content="SvelteKit + MDsveX Blog"><meta property="og:title" content="new Flutter project의 main.dart 코드 파헤쳐보기(2)"><meta property="og:description" content="IDE를 이용해 만든 flutter project의 초기 main.dart 코드들을 보면서 StatelessWidget, StatefulWidget, key에 대해 알아봅니다."><!-- HEAD_svelte-1jfag13_END -->
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">  <div class="header-container svelte-8sye89"><div class="sidebarNavBtn svelte-8sye89"><button data-svelte-h="svelte-1w5a5mz"><i class="fa-solid fa-bars"></i></button></div>   <div class="svelte-149edha"><a href="/"><h1 class="small" data-svelte-h="svelte-9gkbac">Jack.dev.blog</h1></a> </div></div> <div class="sidebar-and-main svelte-8sye89"><div class="sidebar-container svelte-8sye89"><aside class="w-64" aria-label="Sidebar"><div class="overflow-y-auto py-4 px-3 bg-gray-50 rounded dark:bg-gray-800"><ul class="space-y-2 list-none"><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Dart"> <span class="ms-3">Dart</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Flutter"> <span class="ms-3">Flutter</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/SvelteKit"> <span class="ms-3">SvelteKit</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Mdsvex"> <span class="ms-3">Mdsvex</span> </a></li>  <hr><li><a class="flex items-center p-2 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 m-1 text-xl font-semibold text-black" href="/tags/Github"> <span class="ms-3">Github</span> </a></li>  <hr></ul> </div> </aside> </div> <div class="main svelte-8sye89"> <div class="metadata svelte-1nrt46a"><h2 class="heading svelte-1ujuesn large" id="new-flutter-project-maindart--"><a href="#new-flutter-project-maindart--">new Flutter project의 main.dart 코드 파헤쳐보기(2)</a></h2> <p class="svelte-1uy9i9h"><div class="tags svelte-1uy9i9h"><span data-svelte-h="svelte-190wkx9">Tags:</span> <div class="tag-items-container svelte-1uy9i9h"><span class="tag svelte-1uy9i9h">Dart</span><span class="tag svelte-1uy9i9h">Flutter</span></div></div></p> <div class="metadata svelte-1uy9i9h"><span class="date svelte-1uy9i9h">2024. 09. 29. (Sun)</span> </div></div> <div class="component svelte-1nrt46a"><nav class="toc" data-svelte-h="svelte-11ifp4g"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#element-createelement">Element createElement()</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#element">Element</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#element는-widget이랑-무슨-관계지">Element는 Widget이랑 무슨 관계지?</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#statefulwidget">StatefulWidget</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#코드-맛보기">코드 맛보기</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#runapp">runApp</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#_runwidget">_runWidget</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#scheduleattachrootwidget">scheduleAttachRootWidget</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#schedulewarmupframe">scheduleWarmUpFrame</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#scheduleframe">scheduleFrame</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#element-1">Element</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#sources">Sources</a></li></ol></nav> <p data-svelte-h="svelte-exckli">지난 글에서 Widget이 field로 가지고 있던 Key까지 알아보았습니다.</p> <p data-svelte-h="svelte-1heoych">createElement() 메서드에 대해 이어서 보도록 하겠습니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Widget</span> <span class="token keyword">extends</span> <span class="token class-name">DiagnosticableTree</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">const</span> <span class="token class-name">Widget</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token keyword">this</span><span class="token punctuation">.</span>key<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Initializes key for subclasses.</span>

	<span class="token keyword">final</span> <span class="token class-name">Key</span><span class="token operator">?</span> key<span class="token punctuation">;</span>

	<span class="token metadata function">@protected</span>
	<span class="token metadata function">@factory</span>
	<span class="token class-name">Element</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token metadata function">@override</span>
	<span class="token class-name">String</span> <span class="token function">toStringShort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">final</span> <span class="token class-name">String</span> type <span class="token operator">=</span> <span class="token function">objectRuntimeType</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'Widget'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> key <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> type<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">type</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">key</span></span><span class="token string">'</span></span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token metadata function">@override</span>
	<span class="token keyword">void</span> <span class="token function">debugFillProperties</span><span class="token punctuation">(</span><span class="token class-name">DiagnosticPropertiesBuilder</span> properties<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">debugFillProperties</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
		properties<span class="token punctuation">.</span>defaultDiagnosticsTreeStyle <span class="token operator">=</span> <span class="token class-name">DiagnosticsTreeStyle</span><span class="token punctuation">.</span>dense<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token metadata function">@override</span>
	<span class="token metadata function">@nonVirtual</span>
	bool <span class="token keyword">operator</span> <span class="token operator">==</span><span class="token punctuation">(</span><span class="token class-name">Object</span> other<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">super</span> <span class="token operator">==</span> other<span class="token punctuation">;</span>

	<span class="token metadata function">@override</span>
	<span class="token metadata function">@nonVirtual</span>
	int <span class="token keyword">get</span> hashCode <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">super</span><span class="token punctuation">.</span>hashCode<span class="token punctuation">;</span>

	<span class="token keyword">static</span> bool <span class="token function">canUpdate</span><span class="token punctuation">(</span><span class="token class-name">Widget</span> oldWidget<span class="token punctuation">,</span> <span class="token class-name">Widget</span> newWidget<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> oldWidget<span class="token punctuation">.</span>runtimeType <span class="token operator">==</span> newWidget<span class="token punctuation">.</span>runtimeType
			<span class="token operator">&amp;&amp;</span> oldWidget<span class="token punctuation">.</span>key <span class="token operator">==</span> newWidget<span class="token punctuation">.</span>key<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>

	<span class="token keyword">static</span> int <span class="token function">_debugConcreteSubtype</span><span class="token punctuation">(</span><span class="token class-name">Widget</span> widget<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> widget <span class="token operator">is</span> <span class="token class-name">StatefullWidget</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span>
			widget <span class="token operator">is</span> <span class="token class-name">StatelessWidget</span> <span class="token operator">?</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token number">0</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <h1 id="element-createelement" data-svelte-h="svelte-imwk68">Element createElement()</h1> <p data-svelte-h="svelte-15jn3xs">createElement 메서드는 2가지 annotation이 포함되어 있습니다.</p> <ol data-svelte-h="svelte-1sl3w9a"><li><strong>protected</strong>: <code>@protected</code>로 표시된 instance member(method, field 포함)는 같은 클래스나 mixin 혹은 하위 클래스에서만 사용해야합니다.</li> <li><strong>factory</strong>: <code>@factory</code>로 표시된 메서드는 반드시 null 혹은 새로운 instance를 반환해야합니다.</li></ol> <p data-svelte-h="svelte-1unkqs1">참고로 annotation은 편의를 위해 코드에 주석을 다는것입니다. 위의 protected, factory annotation의 의도와 다르게 코드를 쓴다고해도 compile 에러는 나지 않습니다.</p> <p data-svelte-h="svelte-1copesk">이전 글에서 본 바와 같이 StatelessWidget은 Widget을 상속받아 createElement 메서드를 구체화하여 사용하고 있는 것을 확인한 바 있습니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart">absract <span class="token keyword">class</span> <span class="token class-name">StatelessWidget</span> <span class="token keyword">extends</span> <span class="token class-name">Widget</span><span class="token punctuation">:</span>
	<span class="token keyword">const</span> <span class="token class-name">StatelessWidget</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token metadata function">@override</span>
	<span class="token class-name">StatelessElement</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token class-name">StatelessElement</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-ivjlan">그럼 이쯤에서 궁금한 점이 생깁니다.</p> <p data-svelte-h="svelte-1wu4ney">음..Element는 뭐고 Widget이랑 무슨 관계지?</p> <h2 id="element" data-svelte-h="svelte-785ufy">Element</h2> <p data-svelte-h="svelte-rviv98"><a href="https://api.flutter.dev/flutter/widgets/Element-class.html" rel="nofollow">공식 문서</a>에서는 Element를 다음과 같이 설명합니다.</p> <blockquote data-svelte-h="svelte-5jqp31"><p>An instantiation of a Widget at a particular location in the tree.</p></blockquote> <p data-svelte-h="svelte-1u27ylq">Element는 tree의 특정 위치에 있는 Widget의 instance다. 라고 이해할 수 있을 것 같습니다.</p> <h2 id="element는-widget이랑-무슨-관계지" data-svelte-h="svelte-1gpnq9m">Element는 Widget이랑 무슨 관계지?</h2> <p data-svelte-h="svelte-1fyoqg0">Flutter는 Tree구조로 앱을 그립니다.</p> <p data-svelte-h="svelte-1jxgucf">Widget도 tree를 만들고, element도 tree를 만듭니다.</p> <p data-svelte-h="svelte-17j669u">정확히는 <strong>Widget Tree</strong>를 기반으로 <strong>Element Tree</strong>를 구성하게 됩니다.</p> <p data-svelte-h="svelte-8g9vor"><code>StatelessElement createElement() =&gt; StatelessElement(this);</code> 부분이 바로 widget의 구성(configuration)을 바탕으로 element를 만들어 element tree에 넣어주는 방식이죠.</p> <p data-svelte-h="svelte-dfux4k">Widget Tree와 Element Tree가 그려지는 순서는 다음과 같습니다.</p> <hr> <ol data-svelte-h="svelte-f0fa9a"><li><p>main함수안에 있는 <strong><code>runApp(const MyApp)</code></strong> 함수가 실행됩니다.</p></li> <li><p><strong>Flutter</strong>는 MyApp widget을 <strong>Widget Tree의 최상단에 위치</strong>시킵니다(mounts).</p></li> <li><p>Widget Tree에 mount된 MyApp widget은 <strong>createElement</strong> 메서드를 이용해 <strong>element</strong>를 만듭니다(instantiates).</p></li> <li><p>만들어진 element를 <strong>Element Tree에 mount</strong>시킵니다. 이 때 해당 <strong>element는 widget을 참조</strong>(reference)하고 있는 상태입니다.</p></li> <li><p>Flutter는 MyApp widget의 <strong>build 메서드를 실행</strong>시킵니다.</p></li> <li><p>build 메서드는 <strong>MaterialApp widget을 반환</strong>하고 Flutter는 이 widget을 <strong>MyApp widget 밑에 위치</strong>시킵니다.</p></li> <li><p>Widget Tree에 mount된 MaterialApp widget <strong>createElement</strong> 메서드를 이용해 <strong>element</strong>를 만듭니다.</p></li> <li><p>만들어진 element를 <strong>Element Tree에 mount</strong>시킵니다. 이 때 해당 <strong>element는 widget을 참조</strong>(reference)하고 있는 상태입니다.</p></li> <li><p>Flutter는 MaterialApp widget의 <strong>build 메서드를 실행</strong>시킵니다.</p></li> <li><p>위와 같은 과정을 마지막 Widget까지 반복합니다.</p></li></ol> <hr> <p data-svelte-h="svelte-1l4vj3b">main.dart의 Widget Tree와 Element Tree는 결과적으로 다음과 같습니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">&#123;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token metadata function">@override</span>
	<span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token class-name">MaterialApp</span><span class="token punctuation">(</span>
			title<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			theme<span class="token punctuation">:</span> <span class="token class-name">ThemeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			home<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> <span class="token class-name">MyHomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">&#123;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token metadata function">@override</span>
	<span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">></span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyHomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _MyHomePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token metadata function">@override</span>
	<span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
			appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			body<span class="token punctuation">:</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
				child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
					children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
						<span class="token keyword">const</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">)</span>
			<span class="token punctuation">)</span>
		<span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <hr> <p data-svelte-h="svelte-18o9iqn"><img src="/tree.png" alt="main_dart_tree.png"></p> <h1 id="statefulwidget" data-svelte-h="svelte-139a9jg">StatefulWidget</h1> <p data-svelte-h="svelte-nfagrj">맨 처음 Widget Tree와 Element Tree가 만들어지는 과정에 대해서는 이제 어느정도 이해했습니다.</p> <p data-svelte-h="svelte-1m9hmj0">하지만 StatefulWidget 처럼 상태가 변하는 Widget이 어떻게 동작하는지는 설명하고있지 않습니다.</p> <p data-svelte-h="svelte-h97eon">StatefulWidget은 StatelessWidget과는 다르게 build 메서드가 아닌 createState 메서드를 overriding 합니다.</p> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">MyHomePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">const</span> <span class="token class-name">MyHomePage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">,</span> required <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">final</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>

	<span class="token metadata function">@override</span>
	<span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">></span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_MyHomePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _MyHomePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MyHomePage</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
	int _counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// final이 아닙니다!</span>

	<span class="token keyword">void</span> <span class="token function">_increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			_counter<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>

	<span class="token metadata function">@override</span>
	<span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-l1vtur">StatefulWidget은 Element뿐만 아니라 StateObject도 함께 만들어 Element로 하여금 상태의 변화를 감지하고 효율적으로 UI를 업데이트할 수 있도록 합니다.</p> <p data-svelte-h="svelte-1mamlbj">state가 변할 때는 다음과 같은 과정으로 Tree가 업데이트됩니다.</p> <p data-svelte-h="svelte-1lj1fkm">예를 들어 _counter 의 값이 0 에서 1로 바뀌는 상황이라고 가정해봅시다.</p> <hr> <ol data-svelte-h="svelte-ldf7yq"><li><p>유저의 클릭으로 <strong>_increment</strong>메서드가 호출됩니다.</p></li> <li><p>state object의 <strong>_counter값이 0 에서 1로 업데이트</strong> 됩니다.</p></li> <li><p><strong>state object</strong>는 해당 <strong>element를 오염된(dirty) 상태로 마킹</strong>합니다. 다음 프레임에서 업데이트가 필요하다고 Flutter에게 알리기 위함입니다.</p></li> <li><p>stateful element는 <strong>state object에게 업데이트된 _counter값을 가지고 새로운 Widget을 만들라고 요청</strong>합니다.</p></li> <li><p><strong>새롭게 만들어진 Widget</strong>은 <strong>기존 widget이 있던 위치에 mount</strong>됩니다.</p></li> <li><p>기존 widget을 참조하고 있던 <strong>element는 새롭게 mount된 widget을 참조</strong>합니다(기존 widget과 새로운 widget이 같은 타입이므로 <strong>element는 그대로 유지</strong>됩니다.)</p></li></ol> <hr> <h1 id="코드-맛보기" data-svelte-h="svelte-4rnzs1">코드 맛보기</h1> <p data-svelte-h="svelte-2juo64">Flutter가 어떤 식으로 동작하는지 어느정도 파악하긴 했지만 아직은 뜬구름 잡는 느낌이 있습니다.</p> <p data-svelte-h="svelte-n48z6b">Flutter가 알아서 해준다 라고 알고 있는 것 보다는 실제 로직이 포함된 코드를 보면 이해하는데 훨씬 도움이 될 것 같습니다.</p> <p data-svelte-h="svelte-8xd4t3">앱의 진입점 역할을 해주는 runApp함수를 따라가보도록 하겠습니다.</p> <h2 id="runapp" data-svelte-h="svelte-7lzn5a">runApp</h2> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">void</span> <span class="token function">runApp</span><span class="token punctuation">(</span><span class="token class-name">Widget</span> app<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">WidgetBinding</span> binding <span class="token operator">=</span> <span class="token class-name">WidgetsFlutterBinding</span><span class="token punctuation">.</span><span class="token function">ensureInitialized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_runWidget</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span><span class="token function">wrapWithDefaultView</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span><span class="token punctuation">,</span> binding<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'runApp'</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-xdybs6">WidgetBinding은 Flutter engine과 widget layer를 이어주는 역할을 하는 클래스입니다.</p> <p data-svelte-h="svelte-kx492v">runApp은 _runWidget을 호출하고있습니다. _runWidget을 확인해봅시다.</p> <h2 id="_runwidget" data-svelte-h="svelte-rc0lxa">_runWidget</h2> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">void</span> <span class="token function">_runWidget</span><span class="token punctuation">(</span><span class="token class-name">Widget</span> app<span class="token punctuation">,</span> <span class="token class-name">WidgetsBinding</span> binding<span class="token punctuation">,</span> <span class="token class-name">String</span> debugEntryPoint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">assert</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span><span class="token function">debugCheckZone</span><span class="token punctuation">(</span>debugEntryPoint<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  binding
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">scheduleAttachRootWidget</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">scheduleWarmUpFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-7ql5ix">runApp에서 받아온 binding의 scheduleAttachRootWidget 메서드와 scheduleWarmUpFrame을 순차적으로 부르고 있군요.</p> <p data-svelte-h="svelte-mkzcnj">메서드 이름에서 유추해보면 Widget Tree에 root widget을 넣도록 스케줄 하고 Element Tree를 만드는 것 같습니다.</p> <p data-svelte-h="svelte-1mv5jn">binding의 해당 메서드들을 확인해보도록 하겠습니다.</p> <h2 id="scheduleattachrootwidget" data-svelte-h="svelte-qtievi">scheduleAttachRootWidget</h2> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">mixin</span> <span class="token class-name">WidgetsBinding</span> <span class="token keyword">on</span> <span class="token class-name">BindingBase</span><span class="token punctuation">,</span> <span class="token class-name">ServicesBinding</span><span class="token punctuation">,</span> <span class="token class-name">SchedulerBinding</span><span class="token punctuation">,</span> <span class="token class-name">GestureBinding</span><span class="token punctuation">,</span> <span class="token class-name">RendererBinding</span><span class="token punctuation">,</span> <span class="token class-name">SemanticsBinding</span> <span class="token punctuation">&#123;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token metadata function">@protected</span>
	<span class="token keyword">void</span> <span class="token function">scheduleAttachRootWidget</span><span class="token punctuation">(</span><span class="token class-name">Widget</span> rootWidget<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token class-name">Timer</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token function">attachRootWidget</span><span class="token punctuation">(</span>rootWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">attachRootWidget</span><span class="token punctuation">(</span><span class="token class-name">Widget</span> rootWidget<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token function">attachToBuildOwner</span><span class="token punctuation">(</span><span class="token class-name">RootWidget</span><span class="token punctuation">(</span>
			debugShortDescription<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'[root]'</span></span><span class="token punctuation">,</span>
			child<span class="token punctuation">:</span> rootWidget<span class="token punctuation">,</span>
		<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">attachToBuildOwner</span><span class="token punctuation">(</span><span class="token class-name">RootWidget</span> widget<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">final</span> bool isBootstrapFrame <span class="token operator">=</span> rootElement <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		_readyToProduceFrames <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		_rootElement <span class="token operator">=</span> widget<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>buildOwner<span class="token operator">!</span><span class="token punctuation">,</span> rootElement <span class="token operator">as</span> <span class="token class-name">RootElement</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>isBootstrapFrame<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token class-name">SchedulerBinding</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">ensureVisualUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1wl9qt9"><strong>WidgetsBinding</strong>은 여러 Binding들의 mixin이었군요.</p> <p data-svelte-h="svelte-107pke6"><strong>scheduleAttachRootWidget</strong> 메서드는 Timer의 콜백으로 <strong>attachRootWidget</strong>메서드를 호출합니다.</p> <p data-svelte-h="svelte-gwggkh">일정 시간이 지난 후 콜백이 실행되는데 기본값은 0초로 설정되어있습니다. 즉 가능한 빨리 실행이 될 것으로 예상할 수 있습니다.</p> <p data-svelte-h="svelte-hqihyc">attachRootWidget은 다시 <strong>attachToBuildOwner</strong>메서드를 호출합니다.</p> <p data-svelte-h="svelte-651anl">attachToBuildOwner는 root widget을 buildOwner에 root element로 넣어주고,</p> <p data-svelte-h="svelte-1ieehmm">SchedulerBinding.instance 의 <strong>ensureVisualUpdate</strong>메서드를 호출합니다.</p> <p data-svelte-h="svelte-1iq88jq">참고로 BuildOwner는 Widget framework를 관리해주는 클래스입니다. 보통 위처럼 binding이 property로 가지고 있고 처음 operator system에 의해 사용되는 클래스입니다.</p> <p data-svelte-h="svelte-1cgl32l"><strong>ensureVisualUpdate</strong> 를 확인해보도록 하겠습니다.</p> <h2 id="schedulewarmupframe" data-svelte-h="svelte-ga2ati">scheduleWarmUpFrame</h2> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">mixin</span> <span class="token class-name">SchedulerBinding</span> <span class="token keyword">on</span> <span class="token class-name">BindingBase</span> <span class="token punctuation">&#123;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">void</span> <span class="token function">ensureVisualUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">switch</span><span class="token punctuation">(</span>schedulerPhase<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">case</span> <span class="token class-name">SchedulerPhase</span><span class="token punctuation">.</span>idle<span class="token punctuation">:</span>
			<span class="token keyword">case</span> <span class="token class-name">SchedulerPhase</span><span class="token punctuation">.</span>postFrameCallbacks<span class="token punctuation">:</span>
				<span class="token function">scheduleFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">case</span> <span class="token class-name">SchedulerPhase</span><span class="token punctuation">.</span>transientCallbacks<span class="token punctuation">:</span>
			<span class="token keyword">case</span> <span class="token class-name">SchedulerPhase</span><span class="token punctuation">.</span>midFrameMicrotasks<span class="token punctuation">:</span>
			<span class="token keyword">case</span> <span class="token class-name">SchedulerPhase</span><span class="token punctuation">.</span>persistentCallbacks<span class="token punctuation">:</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">scheduleFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_hasSchedulerFrame <span class="token operator">||</span> <span class="token operator">!</span>framesEnabled<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
		<span class="token function">ensureFrameCallbacksRegistered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		platformDispatcher<span class="token punctuation">.</span><span class="token function">schedulFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		_hasScheduledFrame <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1br4vp7">ensureVisualUpdate메서드는 SchedulerBinding mixin의 메서드입니다.</p> <p data-svelte-h="svelte-roa2g0">scheduler의 단계(phase)에 따라 visual udpate를 해주는 듯 합니다.</p> <p data-svelte-h="svelte-m6sm2c">idle 혹은 postFrameCallbacks 단계일 경우 scheduleFrame을 호출합니다.</p> <p data-svelte-h="svelte-1z17im">scheduleFrame메서드는 platformDispatcher의 scheduleFrame()을 호출하고 있습니다.</p> <h2 id="scheduleframe" data-svelte-h="svelte-1hjcz0m">scheduleFrame</h2> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">class</span> <span class="token class-name">PlatformDispatcher</span> <span class="token punctuation">&#123;</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">void</span> <span class="token function">scheduleFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_scheduleFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token metadata function">@Native</span><span class="token operator">&lt;</span><span class="token class-name">Void</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">(</span>symbol<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'PlatformConfigurationNativeApi::ScheduleFrame'</span></span><span class="token punctuation">)</span>
	<span class="token keyword">external</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">_scheduleFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1ytmpos">scheduleFrame메서드는 결국 PlatformDispatcher 클래스의 external 메서드였군요.</p> <p data-svelte-h="svelte-gmkku5">OS에 따라 다른 함수를 받아와서 실행시킬 것으로 예상됩니다.</p> <h2 id="element-1" data-svelte-h="svelte-1ybzd74">Element</h2> <pre class="language-dart"><!-- HTML_TAG_START --><code class="language-dart"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Element</span> <span class="token keyword">extends</span> <span class="token class-name">DiagnosticableTree</span> <span class="token keyword">implements</span> <span class="token class-name">BuildContext</span> <span class="token punctuation">&#123;</span>
	<span class="token metadata function">@override</span>
	<span class="token class-name">Widget</span> <span class="token keyword">get</span> widget <span class="token operator">=</span><span class="token operator">></span> _widget<span class="token operator">!</span><span class="token punctuation">;</span>
	<span class="token class-name">Widget</span><span class="token operator">?</span> _widget<span class="token punctuation">;</span>

	<span class="token metadata function">@override</span>
	bool <span class="token keyword">get</span> mounted <span class="token operator">=</span><span class="token operator">></span> _widget <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>


	<span class="token metadata function">@override</span>
	<span class="token class-name">BuildOwner</span><span class="token operator">?</span> <span class="token keyword">get</span> owner <span class="token operator">=</span><span class="token operator">></span> _owner<span class="token punctuation">;</span>
	<span class="token class-name">BuildOwner</span><span class="token operator">?</span> _owner<span class="token punctuation">;</span>

	<span class="token class-name">BuildScope</span> <span class="token keyword">get</span> buildScope <span class="token operator">=</span><span class="token operator">></span> _parentBuildScope<span class="token operator">!</span><span class="token punctuation">;</span>
	<span class="token class-name">BuildScope</span><span class="token operator">?</span> _parentBuildScope<span class="token punctuation">;</span>

	<span class="token keyword">void</span> <span class="token function">visitChildren</span><span class="token punctuation">(</span><span class="token class-name">ElementVisitor</span> visitor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

	<span class="token class-name">Element</span><span class="token operator">?</span> <span class="token function">updateChild</span><span class="token punctuation">(</span><span class="token class-name">Element</span><span class="token operator">?</span> child<span class="token punctuation">,</span> <span class="token class-name">Widget</span><span class="token operator">?</span> newWidget<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token operator">?</span> newSlot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> <span class="token function">updateChildren</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span> oldChildren<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span> newWidget<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">></span></span><span class="token operator">?</span> forgottenChildren<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token operator">?</span> slots<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">mount</span><span class="token punctuation">(</span><span class="token class-name">Element</span><span class="token operator">?</span> parent<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token operator">?</span> newSlot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">covariant</span> <span class="token class-name">Widget</span> newWidget<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">updateSlotForChild</span><span class="token punctuation">(</span><span class="token class-name">Element</span> child<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token operator">?</span> newSlot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">updateSlot</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token operator">?</span> newSlot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">_updateDepth</span><span class="token punctuation">(</span>int parentDepth<span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token class-name">Element</span> <span class="token function">inflateWidget</span><span class="token punctuation">(</span><span class="token class-name">Widget</span> newWidget<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token operator">?</span> newSlot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">forgetChild</span><span class="token punctuation">(</span><span class="token class-name">Element</span> child<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">unmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	bool <span class="token keyword">get</span> dirty <span class="token operator">=</span><span class="token operator">></span> _dirty<span class="token punctuation">;</span>
	bool _dirty <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">markNeedsBuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">rebuild</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>bool force <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">void</span> <span class="token function">performRebuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre> <p data-svelte-h="svelte-1lvz6ay">(한 눈에 보기 위해 생략된 부분이 많습니다.)</p> <p data-svelte-h="svelte-1501x3u">위처럼 Element 클래스에는 mount, update, markNeedsBuild 등의 메서드들이 실제로 포함되어 있습니다.</p> <p data-svelte-h="svelte-qb1l1j">그림에서 봤던 것들의 실제 로직을 코드로 볼 수 있습니다.</p> <p data-svelte-h="svelte-rm7g0v">맛보기니까 자세하게 다루진 않겠습니다(<del>귀찮아서가 아닙니다</del>).</p> <h1 id="sources" data-svelte-h="svelte-22jvrw">Sources</h1> <ol data-svelte-h="svelte-cabf97"><li><p><a href="https://docs.flutter.dev/resources/architectural-overview#widgets" rel="nofollow">Flutter architecture overview - widgets</a></p></li> <li><p><a href="https://docs.flutter.dev/resources/inside-flutter" rel="nofollow">inside flutter</a></p></li> <li><p><a href="https://github.com/flutter/flutter/blob/main/packages/flutter/lib/src/widgets/framework.dart#L2838" rel="nofollow">BuildOwner</a></p></li> <li><p><a href="https://github.com/flutter/flutter/blob/main/packages/flutter/lib/src/widgets/binding.dart#L409" rel="nofollow">WidgetBinding</a></p></li> <li><p><a href="https://github.com/flutter/flutter/blob/main/packages/flutter/lib/src/widgets/framework.dart#L3473" rel="nofollow">Element</a></p></li></ol> </div></div> </div> 
			
			<script>
				{
					__sveltekit_cqyu4 = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{tags:new Set(["Dart","Flutter","SvelteKit","Mdsvex","Github"])},"uses":{}},null];

					Promise.all([
						import("../_app/immutable/entry/start.D4ozfrvD.js"),
						import("../_app/immutable/entry/app.BF-DqGET.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
	<script src="https://kit.fontawesome.com/56837ace2e.js" crossorigin="anonymous"></script>
</html>
