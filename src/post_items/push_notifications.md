---
title: How to send push notification
author: jack
date: 2025. 05. 16
published: true
description: Flutter ì•±ì—ì„œ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ë³´ë‚´ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.
tags: [Flutter, Firebase]
---

> [!info]
> This document is originally generated by Gemini2.5 deep research, and pruned for more readability by the author(jack).
>
> Keep in mind that AI could make mistakes and generate wrong informations.

---

## Push notification in Flutter

í‘¸ì‹œ ì•Œë¦¼ì€ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì±„ë„ë¡œ, ê°œë°œìê°€ ì‚¬ìš©ìì—ê²Œ ì‹œì˜ì ì ˆí•˜ê³  ê´€ë ¨ì„± ë†’ì€ ì •ë³´ë¥¼ ê¸°ê¸° í™”ë©´ì— ì§ì ‘ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

í‘¸ì‹œ ì•Œë¦¼ì€ ê¸°ë³¸ì ìœ¼ë¡œ ê°„ê²°í•œ ë©”ì‹œì§€ í˜•íƒœë¡œ, ì‚¬ìš©ìì˜ ë°ìŠ¤í¬íƒ‘ ë¸Œë¼ìš°ì €, ëª¨ë°”ì¼ í™ˆ í™”ë©´, ë˜ëŠ” ê¸°ê¸°ì˜ ì•Œë¦¼ ì„¼í„°ì— íŒì—… í˜•íƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì•Œë¦¼ì€ ì¼ë°˜ì ìœ¼ë¡œ **ì‚¬ìš©ìì˜ ë™ì˜**ë¥¼ í•„ìš”ë¡œ í•˜ë©°, í…ìŠ¤íŠ¸ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë¯¸ì§€ë‚˜ ì¸í„°ë™í‹°ë¸Œ ë²„íŠ¼ ê°™ì€ ë¦¬ì¹˜ ë¯¸ë””ì–´ ìš”ì†Œë„ í¬í•¨í•  ìˆ˜ ìˆì–´, ì‚¬ìš©ìê°€ íŠ¹ì • í–‰ë™ì„ ì·¨í•˜ë„ë¡ ìœ ë„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëª¨ë°”ì¼ ìƒíƒœê³„ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì˜ ì¤‘ìš”ì„±ì€ ì•„ë¬´ë¦¬ ê°•ì¡°í•´ë„ ì§€ë‚˜ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

í‘¸ì‹œ ì•Œë¦¼ì€ ì‚¬ìš©ìê°€ ì•±ì„ ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šì„ ë•Œì—ë„ ì¤‘ìš”í•œ ì—…ë°ì´íŠ¸, ê°œì¸í™”ëœ ì½˜í…ì¸ , í”„ë¡œëª¨ì…˜ ë“±ì„ ì§ì ‘ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” í†µë¡œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ì ì°¸ì—¬ë„ë¥¼ ë†’ì´ê³ , ì‚¬ìš©ì ìœ ì§€ìœ¨ì„ í–¥ìƒì‹œí‚¤ë©°, ì „ë°˜ì ì¸ ì‚¬ìš©ì ê²½í—˜ì„ ê°•í™”í•˜ëŠ” ë° í•µì‹¬ì ì¸ ì—­í• ì„ í•©ë‹ˆë‹¤. ë˜í•œ, í‘¸ì‹œ ì•Œë¦¼ì€ ë§ˆì¼€íŒ… ì™¸ì—ë„, ì‹œë¯¼ ì•ˆì „ ì•Œë¦¼ê³¼ ì»¤ë®¤ë‹ˆí‹° ì •ë³´ ì „ë‹¬ ë“± ê³µê³µ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ì˜ì—­ì´ë‚˜ ë³´ì•ˆ ì¸ì¦ ê³¼ì •ì—ì„œë„ ë‹¤ì–‘í•˜ê²Œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì€ í¬ê²Œ ë‘ ê°€ì§€ ìœ í˜•ìœ¼ë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

**ì›ê²© í‘¸ì‹œ ì•Œë¦¼(Remote Push Notifications)** ê³¼ **ë¡œì»¬ ì•Œë¦¼(Local Notifications)** ì…ë‹ˆë‹¤.

Firebase Cloud Messaging(FCM)ê³¼ ê°™ì€ ì„œë¹„ìŠ¤ë¥¼ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆëŠ” ì›ê²© ì•Œë¦¼ì€ ì„œë²„ì—ì„œ ì‹œì‘ë˜ì–´ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì‚¬ìš©ì ê¸°ê¸°ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ì´ëŠ” ë°±ì—”ë“œ ì´ë²¤íŠ¸ì— ë”°ë¼ ì•Œë¦¼ì„ ë³´ë‚´ê±°ë‚˜ íŠ¹ì • ì‚¬ìš©ì ì§‘ë‹¨ì„ íƒ€ê²ŸíŒ…í•´ì•¼ í•˜ëŠ” ìƒí™©ì—ì„œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.

ë°˜ë©´, ë¡œì»¬ ì•Œë¦¼ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚¬ìš©ì ê¸°ê¸° ë‚´ì—ì„œ ì§ì ‘ ìƒì„± ë° ì˜ˆì•½í•˜ëŠ” ì•Œë¦¼ìœ¼ë¡œ, ì„œë²„ ì—°ê²° ì—†ì´ë„ ë™ì‘í•©ë‹ˆë‹¤. ì´ ìœ í˜•ì€ ë¦¬ë§ˆì¸ë”, ì¼ì • ì•Œë¦¼, ë˜ëŠ” ì•± ë‚´ ì‚¬ìš©ì í–‰ë™ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ê°œì¸í™”ëœ ê²½ê³  ë“±ì— ì í•©í•©ë‹ˆë‹¤.

Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì„ êµ¬í˜„í•˜ë©´ ë‹¤ì–‘í•œ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°œì¸í™”ëœ ì•Œë¦¼ì„ í†µí•´ ì‚¬ìš©ì ì°¸ì—¬ë¥¼ ë†’ì¼ ìˆ˜ ìˆìœ¼ë©°, ì•±ì„ ì˜¤ë«ë™ì•ˆ ì‚¬ìš©í•˜ì§€ ì•Šì€ ìœ ì €ì—ê²Œ ë‹¤ì‹œ ê´€ì‹¬ì„ ëŒê¸° ìœ„í•´ ê´€ë ¨ ì½˜í…ì¸ ë‚˜ ë§¤ë ¥ì ì¸ ì œì•ˆì„ ë‹´ì€ íƒ€ê²Ÿ ì•Œë¦¼ì„ ë³´ëƒ„ìœ¼ë¡œì¨ ì‚¬ìš©ì ë³µê·€ìœ¨ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, í‘¸ì‹œ ì•Œë¦¼ì€ ë²ˆê°œ ì„¸ì¼, ì•½ì† ë¦¬ë§ˆì¸ë”, ì¤‘ìš”í•œ ê²½ê³ ì™€ ê°™ì€ ì‹œê°„ì— ë¯¼ê°í•œ ì •ë³´ë¥¼ ì‚¬ìš©ìì—ê²Œ ì¦‰ì‹œ ì „ë‹¬í•˜ëŠ” ìˆ˜ë‹¨ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‚¬ìš©ì ì°¸ì—¬ ì™¸ì—ë„ í‘¸ì‹œ ì•Œë¦¼ì€ ìˆ˜ìµí™” ì „ëµì—ë„ ê¸°ì—¬í•˜ë©°, ì‹œì˜ì ì ˆí•˜ê³  ê´€ë ¨ì„± ë†’ì€ ì •ë³´ë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨ ì „ì²´ ê³ ê° ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ì•± ì‚¬ìš©ë¥ ì„ ë†’ì´ê³  ì‚¬ìš©ì ìœ ì§€ìœ¨ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì€ Flutterì—ì„œ í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„ì˜ ê°€ì¹˜ë¥¼ ë”ìš± ë¶€ê°ì‹œí‚µë‹ˆë‹¤. íŠ¹íˆ ì—¬í–‰, ë¯¸ë””ì–´ ì†Œë¹„ ê°™ì€ íŠ¹ì • ë§¥ë½ì—ì„œëŠ” í‘¸ì‹œ ì•Œë¦¼ì´ ì ì ˆí•œ ìˆœê°„ì— í•„ìˆ˜ì ì¸ ì •ë³´ë¥¼ ì œê³µí•˜ê±°ë‚˜ í¥ë¯¸ë¡œìš´ ì½˜í…ì¸ ë¥¼ ì¶”ì²œí•¨ìœ¼ë¡œì¨ ì‚¬ìš©ì ê²½í—˜ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„ ì›ë¦¬

![push_notification_overview](/flutter_push_overview.png)

Flutterì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ê·¸ ê¸°ë°˜ì´ ë˜ëŠ” ê¸°ìˆ ì— ëŒ€í•œ ê¸°ì´ˆì ì¸ ì´í•´ê°€ í•„ìˆ˜ì ì…ë‹ˆë‹¤. ì´ ê³¼ì •ì€ ì¼ë°˜ì ìœ¼ë¡œ ì—¬ëŸ¬ í•µì‹¬ ë‹¨ê³„ë¥¼ í¬í•¨í•˜ë©°, ë©”ì‹œì§€ê°€ ëŒ€ìƒ ì‚¬ìš©ìì—ê²Œ ì•ˆì •ì ìœ¼ë¡œ ì „ë‹¬ë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

ë†’ì€ ìˆ˜ì¤€ì—ì„œ ë³´ë©´, í‘¸ì‹œ ì•Œë¦¼ì˜ ì „ë‹¬ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **í”Œë«í¼ë³„ í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤**ì— ë“±ë¡í•˜ëŠ” ê²ƒìœ¼ë¡œ ì‹œì‘ë©ë‹ˆë‹¤.
Androidì˜ ê²½ìš°ì—ëŠ” **Firebase Cloud Messaging (FCM)**, iOSì˜ ê²½ìš°ì—ëŠ” **Apple Push Notification service (APNs)** ê°€ í•´ë‹¹ë©ë‹ˆë‹¤.

ë“±ë¡ì´ ì„±ê³µí•˜ë©´, í•´ë‹¹ ê¸°ê¸°ëŠ” **ë””ë°”ì´ìŠ¤ í† í°(device token)** ì´ë¼ëŠ” ê³ ìœ  ì‹ë³„ìë¥¼ ë°›ìŠµë‹ˆë‹¤. ì´ í† í°ì€ í•´ë‹¹ ê¸°ê¸°ì—ì„œ íŠ¹ì • ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ì— ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ì£¼ì†Œ ì—­í• ì„ í•©ë‹ˆë‹¤.

ì–´ë–¤ ì´ë²¤íŠ¸ì— ì˜í•´ ì•Œë¦¼ ì „ì†¡ì´ í•„ìš”í•´ì§€ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ëŠ” ì´ ë””ë°”ì´ìŠ¤ í† í°ê³¼ í•¨ê»˜ ë©”ì‹œì§€ë¥¼ í•´ë‹¹ í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤ë¡œ ë³´ëƒ…ë‹ˆë‹¤.

í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤ëŠ” ì´í›„ í•´ë‹¹ ë©”ì‹œì§€ë¥¼ ì ì ˆí•œ ì‚¬ìš©ì ê¸°ê¸°ë¡œ ë¼ìš°íŒ…í•˜ê³  ì „ë‹¬í•˜ëŠ” ì±…ì„ì„ ì§‘ë‹ˆë‹¤. APNsì™€ FCM ê°™ì€ í”Œë«í¼ë³„ ì„œë¹„ìŠ¤ëŠ” ê° ìƒíƒœê³„ì—ì„œ ì•Œë¦¼ì„ ì•ˆì •ì ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ë° ìˆì–´ ë³µì¡í•œ ê³¼ì •ì„ ê´€ë¦¬í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.

í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œì€ ì—¬ëŸ¬ í•µì‹¬ êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.

- **í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤**: APNs, FCM, ë˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° Web Push ë“±ì´ ìˆìœ¼ë©°, ë©”ì‹œì§€ ì „ë‹¬ì˜ ì¤‘ê°„ ë§¤ê°œì²´ ì—­í• ì„ í•©ë‹ˆë‹¤.
- **ì•± ì„œë²„**: ì•Œë¦¼ì˜ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼ í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤ë¡œ ì „ì†¡í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
- **ë””ë°”ì´ìŠ¤ í† í°**: ê° ë””ë°”ì´ìŠ¤ì— ëŒ€í•œ ê³ ìœ  ì£¼ì†Œë¡œ, ì•Œë¦¼ì´ ì •í™•í•œ ê¸°ê¸°ë¡œ ì „ë‹¬ë˜ë„ë¡ í•©ë‹ˆë‹¤.
- **ì•Œë¦¼ í˜ì´ë¡œë“œ(Payload)**: í…ìŠ¤íŠ¸, ë°ì´í„°, ê´€ë ¨ ë¯¸ë””ì–´ë‚˜ ì•¡ì…˜ ë“± ì‹¤ì œ ì•Œë¦¼ì˜ ì½˜í…ì¸ ì…ë‹ˆë‹¤.
- **í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜**: ì‚¬ìš©ìì˜ ê¸°ê¸°ì— ì„¤ì¹˜ëœ ì•±ìœ¼ë¡œ, ì•Œë¦¼ì„ ìˆ˜ì‹ í•˜ê³  í‘œì‹œí•˜ë©° ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ í•µì‹¬ êµ¬ì„± ìš”ì†Œë¥¼ ì´í•´í•˜ë©´ í‘¸ì‹œ ì•Œë¦¼ì´ ì–´ë–»ê²Œ êµ¬í˜„ë˜ê³  ê´€ë¦¬ë˜ëŠ”ì§€ë¥¼ êµ¬ì¡°ì ìœ¼ë¡œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ëª¨ë°”ì¼ í™˜ê²½ì—ì„œëŠ” ì£¼ë¡œ ë‘ ê°€ì§€ í”Œë«í¼ë³„ í‘¸ì‹œ ì•Œë¦¼ ì„œë¹„ìŠ¤ê°€ ì¤‘ì‹¬ì„ ì´ë£¹ë‹ˆë‹¤.

- **Apple Push Notification Service (APNs)** ëŠ” iOS ë° macOSì—ì„œ ë™ì‘í•˜ëŠ” Apple ê¸°ê¸°ë¥¼ ìœ„í•œ ë…ì  ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ëŠ” Apple ìš´ì˜ì²´ì œì— ê¹Šì´ í†µí•©ë˜ì–´ ìˆìœ¼ë©°, Apple ê¸°ê¸°ì—ì„œ ì•Œë¦¼ì„ ì „ë‹¬í•˜ëŠ” ë° ë§¤ìš° ê²¬ê³ í•œ ë©”ì»¤ë‹ˆì¦˜ì„ ì œê³µí•©ë‹ˆë‹¤.
- ë°˜ë©´ **Firebase Cloud Messaging (FCM)** ì€ Googleì´ ê°œë°œí•œ í¬ë¡œìŠ¤ í”Œë«í¼ ë©”ì‹œì§• ì†”ë£¨ì…˜ìœ¼ë¡œ, Android, iOS, ê·¸ë¦¬ê³  ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì§€ì›í•©ë‹ˆë‹¤.

FCMì€ ë‹¤ì–‘í•œ í”Œë«í¼ì— ê±¸ì³ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, Androidì™€ iOS ëª¨ë‘ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ” Flutter ê°œë°œìì—ê²Œ íŠ¹íˆ ë§¤ë ¥ì ì¸ ì„ íƒì§€ì…ë‹ˆë‹¤. APNsëŠ” Apple ìƒíƒœê³„ë¥¼ ìœ„í•œ ë§ì¶¤í˜• ì†”ë£¨ì…˜ì¸ ë°˜ë©´, FCMì€ í­ë„“ì€ í˜¸í™˜ì„±ì„ ì œê³µí•˜ì—¬ ë‹¤ì–‘í•œ ì‚¬ìš©ì ê¸°ë°˜ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°œë°œ ê³¼ì •ì„ ë‹¨ìˆœí™”ì‹œì¼œ ì¤ë‹ˆë‹¤.

## Firebase Cloud Messaging (FCM)

Firebase Cloud Messaging (FCM)ì€ Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ í•µì‹¬ ì†”ë£¨ì…˜ìœ¼ë¡œ, ë‹¤ì–‘í•œ í”Œë«í¼ì— ê±¸ì³ ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ì„ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” í¬ê´„ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

FCMì˜ ì•„í‚¤í…ì²˜ëŠ” ì•ˆì •ì ì¸ ë©”ì‹œì§€ ì „ë‹¬ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì •êµí•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆìœ¼ë©°, ê¸°ë³¸ì ìœ¼ë¡œ ì„¸ ê°€ì§€ ì£¼ìš” êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤:

- **FCM ì—°ê²° ì„œë²„(connection server)**
- **ì‹ ë¢°ëœ í™˜ê²½(trusted environment)ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„**
- **í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜**

FCM ì—°ê²° ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ì˜ ì§€ì†ì ì¸ ì—°ê²°ì„ ìœ ì§€í•˜ë©°, ë©”ì‹œì§€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì‹ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.

ì‹ ë¢°ëœ í™˜ê²½ì—ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ ì¡´ì¬í•˜ë©°, ì´ ì„œë²„ëŠ” HTTP ë˜ëŠ” XMPP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•´ í´ë¼ìš°ë“œ ê¸°ëŠ¥ì„ í†µí•´ ë©”ì‹œì§€ë¥¼ ìƒì„±í•˜ê³ , íƒ€ê²ŸíŒ…í•˜ë©°, ì „ì†¡í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ, í´ë¼ì´ì–¸íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜(iOS, Android, ë˜ëŠ” ì›¹ ì•±)ì€ FCM SDKë¥¼ í†µí•©í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤.

ì´ ì•„í‚¤í…ì²˜ëŠ” ë©”ì‹œì§€ì˜ ìƒì„±, ì „ì†¡, ìˆ˜ì‹  ê³¼ì •ì„ ìœ ê¸°ì ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” ì—¬ëŸ¬ êµ¬ì„± ìš”ì†Œì— ê¸°ë°˜í•©ë‹ˆë‹¤.

- ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ ë„êµ¬
- ë©”ì‹œì§€ ìš”ì²­ê³¼ ì£¼ì œ(topic) íŒ¬ì•„ì›ƒ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” FCM ë°±ì—”ë“œ
- í”Œë«í¼ë³„ ì „ì†¡ ê³„ì¸µ (Androidì˜ ATL, Appleì˜ APNs, ì›¹ì˜ Web Push í”„ë¡œí† ì½œ)
- ì‚¬ìš©ìì˜ ê¸°ê¸°ì— ì„¤ì¹˜ëœ FCM SDK

FCM ë°±ì—”ë“œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ë¡œë¶€í„° ë©”ì‹œì§€ ìš”ì²­ì„ ìˆ˜ë½í•˜ê³ , êµ¬ë…ëœ ì£¼ì œë¡œ ë©”ì‹œì§€ë¥¼ ë¶„ë°°í•˜ë©°, ë©”ì‹œì§€ IDì™€ ê°™ì€ ì¤‘ìš”í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´í›„ í”Œë«í¼ ì „ì†¡ ê³„ì¸µì´ ë©”ì‹œì§€ë¥¼ ì˜¬ë°”ë¥¸ ê¸°ê¸°ë¡œ ë¼ìš°íŒ…í•˜ê³ , í”Œë«í¼ë³„ ì„¤ì •ì— ë”°ë¼ ì•Œë¦¼ ì „ë‹¬ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

---

### Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ FCM ì‚¬ìš© ì‹œì‘í•˜ê¸°

Flutter ì•±ì—ì„œ FCMì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì²« ë²ˆì§¸ ë‹¨ê³„ëŠ” **Firebase ì½˜ì†”ì—ì„œ Firebase í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •**í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ ì•±ì„ ë“±ë¡í•  ë•Œ, Androidì™€ iOS ì–‘ìª½ì„ ëª¨ë‘ ì§€ì›í•˜ëŠ” ê²½ìš° ë‘ í”Œë«í¼ ëª¨ë‘ì— ëŒ€í•´ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ **í”Œë«í¼ë³„ ì„¤ì • íŒŒì¼**ì´ ìƒì„±ë©ë‹ˆë‹¤:

- Android: `google-services.json`
- iOS: `GoogleService-Info.plist`

ì´ íŒŒì¼ë“¤ì€ Flutter í”„ë¡œì íŠ¸ì˜ í•´ë‹¹ í”Œë«í¼ ë””ë ‰í† ë¦¬ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.

ë˜í•œ iOS ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš°ì—ëŠ” **APNs ì„¤ì •**ì´ ì¶”ê°€ë¡œ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ **APNs ì¸ì¦ì„œ ë˜ëŠ” ê¶Œì¥ë˜ëŠ” ë°©ì‹ì¸ APNs í‚¤**ë¥¼ Firebaseì— ì—…ë¡œë“œí•´ì•¼ í•˜ë©°, ì´ë¥¼ í†µí•´ Firebaseê°€ APNsë¥¼ í†µí•´ iOS ë””ë°”ì´ìŠ¤ë¡œ ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ì‹ ë¢°ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

---

### Flutterì—ì„œ FCM í†µí•©í•˜ê¸°

Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ FCMì„ í†µí•©í•˜ê¸° ìœ„í•´ì„œëŠ” ê³µì‹ **FlutterFire í”ŒëŸ¬ê·¸ì¸**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. `pubspec.yaml` íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì€ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:

```yaml
dependencies:
  firebase_core: latest_version
  firebase_messaging: latest_version
```

ì´í›„ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤:

```bash
flutter pub get
```

Firebaseë¥¼ Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ˆê¸°í™”í•˜ë ¤ë©´, `main()` í•¨ìˆ˜ ë‚´ì—ì„œ `Firebase.initializeApp()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤:

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp();
  runApp(MyApp());
}
```

ì´ë¡œì¨ Flutter ì•±ì—ì„œ FCMì„ í†µí•´ í‘¸ì‹œ ì•Œë¦¼ì„ ìˆ˜ì‹ í•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ êµ¬ì„±ì´ ì™„ë£Œë©ë‹ˆë‹¤.

### Firebase ì´ˆê¸°í™” ì´í›„: ë””ë°”ì´ìŠ¤ í† í° ê´€ë¦¬ì™€ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹ 

Firebaseê°€ ì´ˆê¸°í™”ë˜ë©´, ë‹¤ìŒìœ¼ë¡œ ì¤‘ìš”í•œ ë‹¨ê³„ëŠ” **ë””ë°”ì´ìŠ¤ ë“±ë¡ í† í°(device registration token)ì„ ì–»ê³  ì´ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. **

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í‘¸ì‹œ ì•Œë¦¼ì„ ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ì„œëŠ” **ì‚¬ìš©ìì˜ ê¶Œí•œ ìš”ì²­ì´ ì„ í–‰ë˜ì–´ì•¼** í•˜ë©°, ì´ëŠ” `FirebaseMessaging.instance.requestPermission()` ë©”ì„œë“œë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ê¶Œí•œì„ í—ˆìš©í•˜ë©´, `FirebaseMessaging.instance.getToken()`ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ë””ë°”ì´ìŠ¤ì˜ FCM í† í°ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•±ì´ ì‹œì‘ë  ë•Œë‚˜ ìƒˆë¡œìš´ í† í°ì´ ìƒì„±ë  ë•Œë¥¼ ëŒ€ë¹„í•˜ì—¬, `FirebaseMessaging.instance.onTokenRefresh`ë¥¼ í†µí•´ **í† í° ë³€ê²½ ì‚¬í•­ì„ ê°ì§€í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡**í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

ì´ í† í°ì€ **ì‚¬ìš©ì ê³„ì •ê³¼ ì—°ê²°í•˜ì—¬ ì•ˆì „í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì— ì €ì¥**í•´ì•¼ í‘¸ì‹œ ì•Œë¦¼ì„ ì•ˆì •ì ìœ¼ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### ì„œë²„ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë©”ì‹œì§€ ì „ì†¡ (Downstream Messaging)

ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ ì•±ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë°©ì‹ì—ëŠ” ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

- **Firebase Console**: í…ŒìŠ¤íŠ¸ ì•Œë¦¼, ë§ˆì¼€íŒ… ë©”ì‹œì§€, ì‚¬ìš©ì ì°¸ì—¬ ìœ ë„ë¥¼ ìœ„í•œ ì•Œë¦¼ì„ ì†ì‰½ê²Œ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ì§ê´€ì ì¸ UIë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸ ê¸°ë°˜ íƒ€ê²ŸíŒ…, ë°ì´í„° í˜ì´ë¡œë“œ í¬í•¨ ë“±ì˜ ê¸°ë³¸ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤.
- **Firebase Admin SDK**: ë³´ë‹¤ í”„ë¡œê·¸ë˜ë° ë°©ì‹ì˜ ìë™í™”ëœ ë©”ì‹œì§€ ì „ì†¡ì´ ê°€ëŠ¥í•˜ë©°,
  - ë‹¨ì¼ ë””ë°”ì´ìŠ¤
  - ë””ë°”ì´ìŠ¤ ê·¸ë£¹
  - ì£¼ì œ(Topic)  
     ë“±ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Admin SDKë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ **Cloud Functions for Firebase**, **Google App Engine**, ë˜ëŠ” **ì‚¬ìš©ì ì •ì˜ ì•± ì„œë²„** ë“± **ì‹ ë¢°ëœ ì„œë²„ í™˜ê²½(trusted environment)**ì´ í•„ìš”í•©ë‹ˆë‹¤.
- **FCM HTTP v1 API**: ë˜ ë‹¤ë¥¸ ì˜µì…˜ìœ¼ë¡œ, ë³´ë‹¤ ìœ ì—°í•˜ê²Œ í”Œë«í¼ë³„ ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìœ¼ë©°, ì¸ì¦ ì²˜ë¦¬ ë° ì „ì†¡ ìš”ì²­ì„ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.

---

## Flutterì—ì„œ ë©”ì‹œì§€ ìˆ˜ì‹  ë° ì²˜ë¦¬

Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ FCM ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì€ **ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒœ**ì— ë”°ë¼ ë‹¬ë¼ì§‘ë‹ˆë‹¤:

- **í¬ê·¸ë¼ìš´ë“œ ìƒíƒœ**:  
   `FirebaseMessaging.onMessage` ìŠ¤íŠ¸ë¦¼ì„ ë¦¬ìŠ¤ë‹í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
   ê¸°ë³¸ì ìœ¼ë¡œ Androidì™€ iOSì—ì„œëŠ” í¬ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜ì‹ ëœ ì•Œë¦¼ì€ **ì‹œê°ì ìœ¼ë¡œ í‘œì‹œë˜ì§€ ì•Šìœ¼ë©°**,  
   `flutter_local_notifications` í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ì—¬ **ì§ì ‘ í‘œì‹œ ë¡œì§ì„ êµ¬í˜„**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë°±ê·¸ë¼ìš´ë“œ ë˜ëŠ” ì¢…ë£Œ ìƒíƒœ**:  
   `FirebaseMessaging.onBackgroundMessage` í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.  
   ì´ í•¸ë“¤ëŸ¬ëŠ” Androidì—ì„œ **ë³„ë„ì˜ isolate**ì—ì„œ ì‹¤í–‰ë˜ë©°, **ìµœìƒìœ„ í•¨ìˆ˜**ì´ê±°ë‚˜  
   Flutter 3.3.0 ì´ìƒì—ì„œëŠ” `@pragma('vm:entry-point')`ë¡œ ì£¼ì„ ì²˜ë¦¬ëœ static í•¨ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
- **ì•±ì´ ì¢…ë£Œëœ ìƒíƒœì—ì„œ í‘¸ì‹œ ì•Œë¦¼ìœ¼ë¡œ ì•±ì„ ì—´ì—ˆì„ ê²½ìš°**:  
   `FirebaseMessaging.instance.getInitialMessage()`ë¥¼ í†µí•´ ì•±ì´ ì‹œì‘ë  ë•Œ ì „ë‹¬ëœ ì´ˆê¸° ë©”ì‹œì§€ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë°±ê·¸ë¼ìš´ë“œ ìƒíƒœì—ì„œ ì•Œë¦¼ì„ ëˆŒëŸ¬ ì•±ì´ ì—´ë¦° ê²½ìš°**:  
   `FirebaseMessaging.onMessageOpenedApp` ìŠ¤íŠ¸ë¦¼ì„ í†µí•´ ì´ ìƒí™©ì„ ê°ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### í”Œë«í¼ë³„ êµ¬ì„±

#### Android:

- ë””ë°”ì´ìŠ¤ì— **Google Play ì„œë¹„ìŠ¤**ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨
- `AndroidManifest.xml` íŒŒì¼ì— **ë°±ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ ì²˜ë¦¬**, **ê¸°ë³¸ ì•Œë¦¼ ì±„ë„ ë©”íƒ€ë°ì´í„°** ë“±ì„ í¬í•¨í•´ì•¼ í•¨

#### iOS:

- Xcode í”„ë¡œì íŠ¸ì—ì„œ **í‘¸ì‹œ ì•Œë¦¼ ê¶Œí•œ**, **ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ** í™œì„±í™”
- **APNs ì¸ì¦ í‚¤**ë¥¼ Firebaseì— ì—…ë¡œë“œ
- `method swizzling`ì„ ë¹„í™œì„±í™”í•˜ì§€ ë§ì•„ì•¼ í•¨ (ê¸°ë³¸ ì„¤ì • ìœ ì§€ í•„ìš”)

#### Web:

- Firebase Consoleì—ì„œ **ì›¹ ìê²© ì¦ëª…(VAPID í‚¤)** êµ¬ì„±
- `web/` ë””ë ‰í† ë¦¬ì— `firebase-messaging-sw.js`ë¼ëŠ” ì„œë¹„ìŠ¤ ì›Œì»¤ íŒŒì¼ì„ ìƒì„±

---

### FCMì˜ ê³ ê¸‰ ê¸°ëŠ¥

FCMì€ ë‹¤ì–‘í•œ ê³ ê¸‰ ê¸°ëŠ¥ì„ í†µí•´ ë©”ì‹œì§• ëŠ¥ë ¥ì„ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **ì•Œë¦¼ ë©”ì‹œì§€(Notification Messages)**:  
   ì•±ì´ ë°±ê·¸ë¼ìš´ë“œì¼ ë•Œ **ìë™ìœ¼ë¡œ ì²˜ë¦¬**ë˜ë©°, ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ëŠ” ê¸°ë³¸ í‚¤ë“¤ê³¼ ì„ íƒì ì¸ ë°ì´í„° í˜ì´ë¡œë“œ í¬í•¨
- **ë°ì´í„° ë©”ì‹œì§€(Data Messages)**:  
   ì‚¬ìš©ì ì •ì˜ í‚¤-ê°’ ìŒë§Œ í¬í•¨í•˜ë©°, **ì•± ì½”ë“œì—ì„œ ì§ì ‘ ì²˜ë¦¬**í•´ì•¼ í•¨
- **í† í”½ ë©”ì‹œì§•**:  
   íŠ¹ì • ì£¼ì œì— êµ¬ë…ëœ ë””ë°”ì´ìŠ¤ ê·¸ë£¹ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆì–´, **ê´€ì‹¬ì‚¬ê°€ ë¹„ìŠ·í•œ ì‚¬ìš©ìì—ê²Œ ë¸Œë¡œë“œìºìŠ¤íŠ¸** ê°€ëŠ¥
- **ë©”ì‹œì§€ ìš°ì„ ìˆœìœ„ ì„¤ì • (normal / high)**:  
   ë””ë°”ì´ìŠ¤ê°€ ì €ì „ë ¥ ëª¨ë“œì¼ ë•Œë„ ì¦‰ì‹œ ìˆ˜ì‹  ê°€ëŠ¥í•˜ê²Œ í• ì§€ ì—¬ë¶€ ê²°ì •
- **ì „ì†¡ ì˜µì…˜**:  
   ë©”ì‹œì§€ì˜ **ìˆ˜ëª…(Time-to-Live)** ì„¤ì •, **ìœ ì‚¬ ë©”ì‹œì§€ ë³‘í•©ì„ ìœ„í•œ collapse key** ì„¤ì • ë“± ì§€ì›
- **ì—…ìŠ¤íŠ¸ë¦¼ ë©”ì‹œì§• (Upstream Messaging)**:  
   í´ë¼ì´ì–¸íŠ¸ ì•±ì´ ì„œë²„ë¡œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆìŒ.  
   ì´ ê¸°ëŠ¥ì€ XMPP ì„œë²„ë¡œ ì„¤ì •ëœ ì•± ì„œë²„ê°€ í•„ìš”í•˜ë©°, **ë””ë°”ì´ìŠ¤-ì„œë²„ ê°„ ì–‘ë°©í–¥ í†µì‹ **ì´ í•„ìš”í•œ ê²½ìš° ìœ ìš©

ë°˜ë©´, ì¼ë°˜ì ì¸ í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„ì€ **ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ë©”ì‹œì§•(ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸)**ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

## Flutter Local Notifications (ë¡œì»¬ í‘¸ì‹œ ì•Œë¦¼)

**Flutter Local Notifications**ëŠ” Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ **ì¸í„°ë„· ì—°ê²°ì´ë‚˜ ì„œë²„ ì—†ì´ë„** ë””ë°”ì´ìŠ¤ì— ì§ì ‘ ì•Œë¦¼ì„ í‘œì‹œí•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.  
ì´ëŸ¬í•œ ì•Œë¦¼ì€ ì•± ë‚´ë¶€ì—ì„œ ìƒì„±ë˜ê³  ì˜ˆì•½ë˜ë¯€ë¡œ, **ë¦¬ë§ˆì¸ë”, ì˜ˆì•½ëœ ì´ë²¤íŠ¸, ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê¸°ë°˜ì˜ ê°œì¸í™”ëœ ê²½ê³ ** ë“±ì— ì í•©í•©ë‹ˆë‹¤.  
ë„¤íŠ¸ì›Œí¬ì™€ ë¬´ê´€í•˜ê²Œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì— **ì‹ ë¢°ì„± ë†’ì€ ì•Œë¦¼ ì „ë‹¬**ì´ ê°€ëŠ¥í•˜ë©°, **ì‹œì˜ì ì ˆí•˜ê³  ê´€ë ¨ì„± ë†’ì€ ì‚¬ìš©ì ê²½í—˜**ì„ í–¥ìƒì‹œí‚¤ëŠ” ë° ê¸°ì—¬í•©ë‹ˆë‹¤.

---

### íŒ¨í‚¤ì§€ í†µí•©

Flutter Local Notificationsë¥¼ í”„ë¡œì íŠ¸ì— í†µí•©í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

1. `pubspec.yaml` íŒŒì¼ì— ë‹¤ìŒ ì˜ì¡´ì„±ì„ ì¶”ê°€í•©ë‹ˆë‹¤:

   ```yaml
   dependencies:
     flutter_local_notifications: latest_version
   ```

2. í„°ë¯¸ë„ì—ì„œ `flutter pub get` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.
3. Dart ì½”ë“œì—ì„œ íŒ¨í‚¤ì§€ë¥¼ ì„í¬íŠ¸í•©ë‹ˆë‹¤:

   ```dart
   import 'package:flutter_local_notifications/flutter_local_notifications.dart';
   ```

4. ë‹¤ìŒê³¼ ê°™ì´ í”ŒëŸ¬ê·¸ì¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

   ```dart
   final FlutterLocalNotificationsPlugin flutterLocalNotificationsPlugin = FlutterLocalNotificationsPlugin();
   ```

ì´ì²˜ëŸ¼ ê°„ë‹¨í•œ í†µí•© ê³¼ì •ì„ í†µí•´ **ì•Œë¦¼ ìƒì„±, í‘œì‹œ, ìŠ¤ì¼€ì¤„ë§** ê¸°ëŠ¥ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### ì´ˆê¸°í™” ë° í”Œë«í¼ ì„¤ì •

Flutter Local Notificationsë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ **í”Œë«í¼ë³„ ì´ˆê¸° ì„¤ì •**ì´ í•„ìš”í•©ë‹ˆë‹¤.  
ë‹¤ìŒê³¼ ê°™ì´ `flutterLocalNotificationsPlugin.initialize()` ë©”ì„œë“œë¥¼ í†µí•´ ì´ˆê¸°í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤:

- **Android**:  
   `AndroidInitializationSettings`ë¥¼ ì‚¬ìš©í•˜ë©°, ë³´í†µ ì•± ì•„ì´ì½˜ì„ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.
- **iOS / macOS**:  
   `IOSInitializationSettings` ë˜ëŠ” ìµœì‹  ë²„ì „ì—ì„œëŠ” `DarwinInitializationSettings`ë¥¼ ì‚¬ìš©í•˜ì—¬  
   **ì‚¬ìš´ë“œ, ë°°ì§€, ê²½ê³  ë“± ê¶Œí•œ ìš”ì²­ ì„¤ì •**ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
- ì‚¬ìš©ìê°€ **ì•Œë¦¼ì„ í´ë¦­í–ˆì„ ë•Œì˜ ë™ì‘ì„ ì²˜ë¦¬**í•˜ê¸° ìœ„í•´,  
   `onDidReceiveNotificationResponse` ì½œë°±ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ì•Œë¦¼ ì˜ˆì•½ ê¸°ëŠ¥**ì„ ì‚¬ìš©í•˜ë ¤ë©´ `timezone` íŒ¨í‚¤ì§€ë¥¼ ì´ˆê¸°í™”í•˜ê³   
   **ì‚¬ìš©ìì˜ ë¡œì»¬ ì‹œê°„ëŒ€ë¥¼ ì„¤ì •**í•´ì•¼ ì •í™•í•œ ìŠ¤ì¼€ì¤„ë§ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

### ê¸°ë³¸ ì•Œë¦¼ í‘œì‹œ

ê¸°ë³¸ì ì¸ ë¡œì»¬ ì•Œë¦¼ì€ `flutterLocalNotificationsPlugin.show()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```dart
flutterLocalNotificationsPlugin.show(
  0, // ì•Œë¦¼ ID (ê³ ìœ í•´ì•¼ í•¨)
  'ì œëª©',
  'ë³¸ë¬¸ ë‚´ìš©',
  NotificationDetails(
    android: AndroidNotificationDetails(
      'channel_id',
      'channel_name',
      channelDescription: 'channel_description',
    ),
    iOS: DarwinNotificationDetails(),
  ),
  payload: 'ì „ë‹¬í•  ë°ì´í„°',
);
```

- `NotificationDetails` ê°ì²´ëŠ” Androidì™€ iOSì— ëŒ€í•œ **í”Œë«í¼ë³„ êµ¬ì„± ì˜µì…˜**ì„ ë‹´ìŠµë‹ˆë‹¤.
- ì•Œë¦¼ë§ˆë‹¤ ê³ ìœ í•œ **ID, ì œëª©, ë³¸ë¬¸**ì„ ì œê³µí•´ì•¼ í•˜ë©°,
- ì„ íƒì ìœ¼ë¡œ `payload`ë¥¼ í¬í•¨ì‹œì¼œ **ì‚¬ìš©ìê°€ ì•Œë¦¼ì„ ëˆŒë €ì„ ë•Œ íŠ¹ì • ë°ì´í„°ë¥¼ ì „ë‹¬**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ APIë¥¼ í†µí•´ ë¡œì»¬ ì•Œë¦¼ì„ ì•± ë‚´ ê¸°ëŠ¥ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ë™í•˜ì—¬ **ì‚¬ìš©ì ë§ì¶¤í˜• ê²½í—˜ì„ ê°•í™”**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Flutter Local Notifications - ê³ ê¸‰ ê¸°ëŠ¥ ë° í”Œë«í¼ êµ¬ì„±

**Flutter Local Notifications**ëŠ” ë‹¤ì–‘í•œ **ì•Œë¦¼ ì˜ˆì•½ ì˜µì…˜**, **ì•Œë¦¼ UI ì»¤ìŠ¤í„°ë§ˆì´ì§•**, **ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ì²˜ë¦¬**, ê·¸ë¦¬ê³  **í”Œë«í¼ë³„ êµ¬ì„±**ì„ ì§€ì›í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ì´ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì…ë‹ˆë‹¤.

---

### ğŸ“† ì•Œë¦¼ ì˜ˆì•½ ê¸°ëŠ¥

Flutter Local NotificationsëŠ” ë‹¤ì–‘í•œ ë°©ì‹ì˜ ì•Œë¦¼ ì˜ˆì•½ì„ ì§€ì›í•©ë‹ˆë‹¤:

- **ë‹¨ì¼ ì˜ˆì•½ (1íšŒì„±)**  
   `flutterLocalNotificationsPlugin.zonedSchedule()` ë©”ì„œë“œì™€ `TZDateTime` ê°ì²´ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ì‹œê°„ì— ì•Œë¦¼ì„ ì˜ˆì•½í•©ë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ `timezone` íŒ¨í‚¤ì§€ë¥¼ ì´ˆê¸°í™”í•´ì•¼ í•©ë‹ˆë‹¤.
- **ë°˜ë³µ ì˜ˆì•½ (ë§¤ì¼ / ë§¤ì£¼)**  
   `zonedSchedule()` ë©”ì„œë“œì˜ `matchDateTimeComponents` ë§¤ê°œë³€ìˆ˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤.
  - `DateTimeComponents.time` â†’ ë§¤ì¼ ê°™ì€ ì‹œê°„ì— ì•Œë¦¼
  - `DateTimeComponents.dayOfWeekAndTime` â†’ ë§¤ì£¼ ê°™ì€ ìš”ì¼ê³¼ ì‹œê°„ì— ì•Œë¦¼
- **ì£¼ê¸°ì  ë°˜ë³µ ì•Œë¦¼**  
   `flutterLocalNotificationsPlugin.periodicallyShow()` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ **ë§¤ì‹œê°„, ë§¤ì¼, ë§¤ë¶„** ê°™ì€ ê³ ì • ì£¼ê¸°ë¡œ ì•Œë¦¼ì„ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì •ì˜ ë°˜ë³µ ì£¼ê¸°ë„ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.  
   âš ï¸ ë‹¨, **Windowsì—ì„œëŠ” ë°˜ë³µ ì•Œë¦¼ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

---

### ğŸ¨ ì•Œë¦¼ UI ì»¤ìŠ¤í„°ë§ˆì´ì§•

Flutter Local NotificationsëŠ” í”Œë«í¼ë³„ë¡œ ë‹¤ì–‘í•œ **ì•Œë¦¼ ë””ìì¸ ì„¤ì •**ì„ ì§€ì›í•©ë‹ˆë‹¤:

#### Android

- **ì•„ì´ì½˜ ì„¤ì •**: ì´ˆê¸°í™” ì‹œ ë° `AndroidNotificationDetails` ë‚´ì—ì„œ ì§€ì •
- **ì»¤ìŠ¤í…€ ì‚¬ìš´ë“œ**:
  - `RawResourceAndroidNotificationSound`: ì•± ë‚´ `/res/raw/` ë””ë ‰í„°ë¦¬ì— íŒŒì¼ ì¶”ê°€
  - `UriAndroidNotificationSound`: ì‹œìŠ¤í…œ ì‚¬ìš´ë“œ ì‚¬ìš©
- **ìŠ¤íƒ€ì¼ ì •ë³´** (`styleInformation`):
  - Big Picture Style
  - Big Text Style
  - Inbox Style
  - Messaging Style
  - Media Style

#### iOS / macOS

- **ì»¤ìŠ¤í…€ ì‚¬ìš´ë“œ**: ì•± ë²ˆë“¤ì— ì‚¬ìš´ë“œ íŒŒì¼ì„ ì¶”ê°€í•˜ê³  `IOSNotificationDetails` ë˜ëŠ” `DarwinNotificationDetails`ì— ì§€ì •
- **ì•± ë°°ì§€ ì„¤ì •**: `badgeNumber` ì†ì„± ì‚¬ìš©
- **ì´ë¯¸ì§€ ë“±ì˜ ì²¨ë¶€íŒŒì¼**: `DarwinNotificationAttachment`ë¥¼ í†µí•´ ì²¨ë¶€ (iOS 10+, macOS 10.14+)

#### ê¸°íƒ€ í”Œë«í¼

- **Linux**: í…Œë§ˆ ì•„ì´ì½˜, Flutter assets ê¸°ë°˜ ì•„ì´ì½˜, ì‚¬ìš´ë“œ
- **Windows**: XML ê¸°ë°˜ ê³ ê¸‰ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì§€ì›

---

### ğŸ‘† ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ì²˜ë¦¬

ì‚¬ìš©ìì™€ì˜ ìƒí˜¸ì‘ìš©ì„ ì ì ˆíˆ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ UXì—ì„œ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤:

- **ì•Œë¦¼ í´ë¦­ ì²˜ë¦¬**  
   `initialize()` ì‹œ `onDidReceiveNotificationResponse` ì½œë°±ì„ ì§€ì •í•˜ì—¬ ì•± ì‹¤í–‰ ì¤‘ ì•Œë¦¼ í´ë¦­ ì‹œì˜ ë™ì‘ì„ ì²˜ë¦¬
- **ì•±ì´ êº¼ì§„ ìƒíƒœì—ì„œ ì•Œë¦¼ í´ë¦­ ì‹œ ì²˜ë¦¬**  
   `getNotificationAppLaunchDetails()`ë¥¼ í†µí•´ ì•±ì´ ì•Œë¦¼ìœ¼ë¡œ ì¸í•´ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸ ê°€ëŠ¥
- **payload ì „ë‹¬**  
   `show()` ë©”ì„œë“œ í˜¸ì¶œ ì‹œ `payload`ë¥¼ í¬í•¨ì‹œì¼œ, í´ë¦­ ì‹œ íŠ¹ì • í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë“± ë™ì‘ ì œì–´ ê°€ëŠ¥
- **ì•¡ì…˜ ë²„íŠ¼ ì¶”ê°€**  
   Android, iOS, Windowsì—ì„œ **ë¹ ë¥¸ ë™ì‘ ìˆ˜í–‰ì„ ìœ„í•œ ë²„íŠ¼**ì„ ì•Œë¦¼ì— ì¶”ê°€í•  ìˆ˜ ìˆìŒ

---

### âš™ï¸ í”Œë«í¼ë³„ ì„¤ì • ì£¼ì˜ì‚¬í•­

#### Android

- `AndroidManifest.xml`:
  - ê¶Œí•œ ì¶”ê°€: ë¶€íŒ… ì™„ë£Œ ì´ë²¤íŠ¸, ì •í™•í•œ ì•ŒëŒ ìŠ¤ì¼€ì¤„ë§ ë“±
  - ë¦¬ì‹œë²„ ì„ ì–¸ í•„ìš”
- `build.gradle`:
  - êµ¬ë²„ì „ Android í˜¸í™˜ì„ ìœ„í•´ **Desugaring ì„¤ì •** í•„ìš”í•  ìˆ˜ ìˆìŒ
- Android 12(API 31)+:
  - `PendingIntent`ì— **FLAG_IMMUTABLE ë˜ëŠ” FLAG_MUTABLE** ì„¤ì • í•„ìˆ˜

#### iOS

- `AppDelegate.swift` ë˜ëŠ” `AppDelegate.m`ì— ì•Œë¦¼ ì²˜ë¦¬ ì½”ë“œ ì¶”ê°€
- ì•±ì´ í¬ê·¸ë¼ìš´ë“œì¼ ë•Œ ì•Œë¦¼ì„ ì§ì ‘ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ êµ¬í˜„ í•„ìš”

#### Web

- ê³µì‹ ì§€ì›ì€ ì œí•œì ì´ë©°, **JavaScript interop**ìœ¼ë¡œ ë¸Œë¼ìš°ì €ì˜ Notification APIë¥¼ í™œìš©í•´ì•¼ í•¨

---

### ğŸ§© ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ ë° ë””ë²„ê¹… íŒ

- **iOS ë¦´ë¦¬ì¦ˆ ëª¨ë“œì—ì„œ ì•Œë¦¼ ë¯¸í‘œì‹œ**: ê¶Œí•œ ì„¤ì • ë˜ëŠ” ì´ˆê¸°í™” ëˆ„ë½ ì—¬ë¶€ í™•ì¸
- **ì•Œë¦¼ ì•„ì´ì½˜ ë¯¸ë“±ë¡ ì‹œ ì˜¤ë¥˜**: Androidì—ì„  ë°˜ë“œì‹œ ì•„ì´ì½˜ ë¦¬ì†ŒìŠ¤ ì¶”ê°€ í•„ìš”
- **ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì•Œë¦¼ ìˆ˜ì‹  ì•ˆ ë¨**: ì œì¡°ì‚¬ íŠ¹ìœ ì˜ ë°±ê·¸ë¼ìš´ë“œ ì œí•œ ì •ì±… ë•Œë¬¸ì¼ ìˆ˜ ìˆìŒ
- **ì˜ˆì•½ ì•Œë¦¼ ë¶ˆì•ˆì •**: ì¼ë¶€ Android ê¸°ê¸°ì—ì„œ ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥ì´ ì‹ ë¢°ì„± ë‚®ì„ ìˆ˜ ìˆìŒ
- **ë””ë²„ê¹… íŒ**: ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ íŒŒì•…í•˜ë©´ ë¬¸ì œ í•´ê²°ì— ë„ì›€

---

ì´ì²˜ëŸ¼ **Flutter Local NotificationsëŠ” ê°•ë ¥í•˜ë©´ì„œë„ ìœ ì—°í•œ ë¡œì»¬ ì•Œë¦¼ ì‹œìŠ¤í…œ**ì„ ì œê³µí•˜ë©°, í”Œë«í¼ë³„ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¤ëŠ” ì ì ˆí•œ êµ¬ì„±ì„ í†µí•´ **ì „ì²œí›„ ì‚¬ìš©ì ì•Œë¦¼ ê¸°ëŠ¥**ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Flutter Local Notificationsì™€ FCM í‘¸ì‹œ ì•Œë¦¼ í†µí•©

**Firebase Cloud Messaging(FCM)**ê³¼ **Flutter Local Notifications**ì˜ í†µí•©ì€ Flutter ì•± ë‚´ì—ì„œ **ì•Œë¦¼ í‘œì‹œë¥¼ ë³´ë‹¤ ì„¸ë°€í•˜ê²Œ ì œì–´**í•˜ê³ , **ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒ**ì‹œí‚¤ëŠ” ê°•ë ¥í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

---

### ğŸ§© FCMê³¼ Local Notificationsì˜ í†µí•© ì‚¬ìš© ì‚¬ë¡€

ë‘ ì‹œìŠ¤í…œì„ ê²°í•©í•¨ìœ¼ë¡œì¨ ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **ë°±ì—”ë“œ ë°ì´í„° ê¸°ë°˜ ì»¤ìŠ¤í…€ ì•Œë¦¼**  
   FCMì„ í†µí•´ ì•±ì˜ ë°±ì—”ë“œì— ë°ì´í„° ì—…ë°ì´íŠ¸ë¥¼ íŠ¸ë¦¬ê±°í•˜ê³ , ì´í›„ í•´ë‹¹ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ **Flutter Local Notifications**ë¥¼ ì‚¬ìš©í•´ ì‚¬ìš©ìì—ê²Œ **ë§ì¶¤í˜• ì•Œë¦¼**ì„ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. â†’ ì‹¤ì‹œê°„ ë°ì´í„° ê¸°ë°˜ ì•Œë¦¼ì— ì í•©
- **ì•±ì´ í¬ê·¸ë¼ìš´ë“œ ìƒíƒœì¼ ë•Œì˜ FCM ì•Œë¦¼ ì²˜ë¦¬**  
   ê¸°ë³¸ì ìœ¼ë¡œ Androidì™€ iOSì—ì„œëŠ” ì•±ì´ í¬ê·¸ë¼ìš´ë“œ ìƒíƒœì¼ ê²½ìš° **FCM ì•Œë¦¼ì´ í™”ë©´ì— í‘œì‹œë˜ì§€ ì•ŠìŒ**. ì´ë•Œ Flutter Local Notificationsë¥¼ í™œìš©í•˜ë©´ **í¬ê·¸ë¼ìš´ë“œì—ì„œë„ ì•Œë¦¼ì„ í‘œì‹œ**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
   â†’ ì‚¬ìš©ì ê²½í—˜ì˜ ì¼ê´€ì„± í™•ë³´
- **ì•± ìƒíƒœì™€ ë¬´ê´€í•œ í†µì¼ëœ ì•Œë¦¼ ì²˜ë¦¬**  
   ì•±ì´ í¬ê·¸ë¼ìš´ë“œ, ë°±ê·¸ë¼ìš´ë“œ, ì¢…ë£Œ ìƒíƒœì— ìˆë“  ê´€ê³„ì—†ì´ **í†µì¼ëœ ì‚¬ìš©ì ì•Œë¦¼ ê²½í—˜** ì œê³µ ê°€ëŠ¥

---

### âš™ï¸ í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• êµ¬í˜„ ë°©ë²•

í¬ê·¸ë¼ìš´ë“œ ìƒíƒœì˜ FCM ì•Œë¦¼ì„ Flutter Local Notificationsë¡œ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

1. **`FirebaseMessaging.onMessage` ìŠ¤íŠ¸ë¦¼ ë¦¬ìŠ¤ë‹**  
   ì•±ì´ í¬ê·¸ë¼ìš´ë“œì¼ ë•Œ ìˆ˜ì‹ ëœ FCM ë©”ì‹œì§€ë¥¼ ê°ì§€

   ```dart
   FirebaseMessaging.onMessage.listen((RemoteMessage message) {
     // ë©”ì‹œì§€ ì²˜ë¦¬ ë¡œì§
   });
   ```

2. **RemoteMessageì—ì„œ ì•Œë¦¼ ë°ì´í„° ì¶”ì¶œ**  
   ì œëª©, ë³¸ë¬¸, ê¸°íƒ€ ì»¤ìŠ¤í…€ ë°ì´í„° ì¶”ì¶œ
3. **`flutterLocalNotificationsPlugin.show()` í˜¸ì¶œ**  
   ì¶”ì¶œí•œ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ **ì»¤ìŠ¤í…€ ë¡œì»¬ ì•Œë¦¼**ì„ ìƒì„± ë° í‘œì‹œ

   ```dart
   flutterLocalNotificationsPlugin.show(
     0,
     message.notification?.title,
     message.notification?.body,
     notificationDetails,
     payload: 'custom_payload',
   );
   ```

ì´ë ‡ê²Œ í•˜ë©´ ì•±ì´ í¬ê·¸ë¼ìš´ë“œì¼ ë•Œë„ **ì‚¬ìš©ì ì •ì˜ëœ ë°©ì‹**ìœ¼ë¡œ ì•Œë¦¼ì„ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### âœ… FCM + Local Notification í†µí•© ì‹œ Best Practices

- **ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€**  
   ë™ì¼í•œ ë©”ì‹œì§€ì— ëŒ€í•´ FCM SDKì™€ Flutter Local Notificationsê°€ ëª¨ë‘ ì•Œë¦¼ì„ í‘œì‹œí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜ í•„ìš”  
   â†’ ì¼ë°˜ì ìœ¼ë¡œ í¬ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ëŠ” ì§ì ‘ í‘œì‹œ, ë°±ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ëŠ” FCM ê¸°ë³¸ ì²˜ë¦¬ ìœ ì§€
- **Android Notification Channel ê´€ë¦¬**  
   ì•Œë¦¼ ì±„ë„ ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ ì±„ë„ì„ ëª…í™•íˆ ì •ì˜í•˜ê³  ì¬ì‚¬ìš©  
   â†’ Android 8.0 ì´ìƒì—ì„œëŠ” ì±„ë„ì´ í•„ìˆ˜
- **ì‚¬ìš©ì ê²½í—˜ ê³ ë ¤**
  - ë„ˆë¬´ ë§ì€ ì•Œë¦¼ìœ¼ë¡œ ì‚¬ìš©ì í”¼ë¡œ ìœ ë°œí•˜ì§€ ì•Šê¸°
  - ì•Œë¦¼ì€ **ì ì ˆí•œ ì‹œì **ì—, **ì˜ë¯¸ ìˆëŠ” ë‚´ìš©**ìœ¼ë¡œ

---

ì´ì²˜ëŸ¼ FCMê³¼ Flutter Local Notificationsë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, **ì•±ì˜ ìƒíƒœì— ê´€ê³„ì—†ì´ ì¼ê´€ëœ ì‚¬ìš©ì ì•Œë¦¼ ì²˜ë¦¬**ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ì–‘í•œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ì— **ì •êµí•˜ê²Œ ëŒ€ì‘**í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## FCM í‘¸ì‹œ ì•Œë¦¼ vs Flutter Local Notifications ì„ íƒ ê¸°ì¤€

Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì–´ë–¤ ì•Œë¦¼ ë°©ì‹ì„ ì‚¬ìš©í• ì§€ ê²°ì •í•˜ë ¤ë©´ **Firebase Cloud Messaging(FCM) í‘¸ì‹œ ì•Œë¦¼**ê³¼ **Flutter Local Notifications**ì˜ ê¸°ëŠ¥, ì¥ë‹¨ì ì„ ëª…í™•íˆ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

---

### ğŸŒ FCM í‘¸ì‹œ ì•Œë¦¼ì˜ íŠ¹ì§•

**FCM**ì€ ì„œë²„ì—ì„œ ì‚¬ìš©ì ê¸°ê¸°ë¡œ **ì¸í„°ë„·ì„ í†µí•´ ë©”ì‹œì§€ë¥¼ ì „ë‹¬**í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ, **ì›ê²© ì•Œë¦¼**ì´ í•„ìš”í•œ ìƒí™©ì— ì í•©í•©ë‹ˆë‹¤.

- **ì¸í„°ë„· ì—°ê²° í•„ìˆ˜**: ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê±°ë‚˜ ìˆ˜ì‹ í•˜ë ¤ë©´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ ì˜¨ë¼ì¸ ìƒíƒœì—¬ì•¼ í•¨
- **ë°±ì—”ë“œ í•„ìš”**: ì•Œë¦¼ ë°œì†¡ì„ ìœ„í•œ **ì„œë²„ ì¸í”„ë¼**ê°€ ë°˜ë“œì‹œ í•„ìš”
- **ë¦¬ì¹˜ ì•Œë¦¼ ì§€ì›**: ì´ë¯¸ì§€, ì˜ìƒ, ë²„íŠ¼ ë“± **ì¸í„°ë™í‹°ë¸Œí•œ ì•Œë¦¼ êµ¬ì„± ê°€ëŠ¥**
- **ì •êµí•œ íƒ€ê²ŸíŒ…**: íŠ¹ì • ì‚¬ìš©ì, ì‚¬ìš©ì ê·¸ë£¹, ë˜ëŠ” ì£¼ì œ(Topic) êµ¬ë…ìì—ê²Œ **ì •ë°€ íƒ€ê²ŸíŒ… ë°œì†¡**
- **ì•± ìƒíƒœì™€ ë¬´ê´€í•˜ê²Œ ë™ì‘**: ì•±ì´ **ë°±ê·¸ë¼ìš´ë“œ/ì¢…ë£Œ ìƒíƒœ**ì—¬ë„ ì•Œë¦¼ ìˆ˜ì‹  ê°€ëŠ¥
- **í¬ë¡œìŠ¤ í”Œë«í¼ ì§€ì›**: Android, iOS, ì›¹ ì§€ì› (iOSì˜ ê²½ìš° ë‚´ë¶€ì ìœ¼ë¡œ APNs ì‚¬ìš©)

â†’ **ì‹¤ì‹œê°„ ì†Œí†µ, ë°±ì—”ë“œ ê¸°ë°˜ ì•Œë¦¼ ë°œì†¡, ì‚¬ìš©ì ì°¸ì—¬ ìœ ë„** ë“±ì— ì í•©

---

### ğŸ“± Flutter Local Notificationsì˜ íŠ¹ì§•

**Flutter Local Notifications**ëŠ” ê¸°ê¸° ë‚´ì—ì„œ ì§ì ‘ ì•Œë¦¼ì„ ìƒì„±í•˜ì—¬ í‘œì‹œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ, **ë¡œì»¬ ì´ë²¤íŠ¸ ê¸°ë°˜ ì•Œë¦¼**ì— ì í•©í•©ë‹ˆë‹¤.

- **ì˜¤í”„ë¼ì¸ ì‚¬ìš© ê°€ëŠ¥**: ì¸í„°ë„· ì—°ê²° ì—†ì´ **ì™„ì „ ì˜¤í”„ë¼ì¸ í™˜ê²½**ì—ì„œë„ ì‘ë™
- **ê¸°ê¸° ë‚´ ìƒì„±/ìŠ¤ì¼€ì¤„ë§**: ì•Œë¦¼ ìƒì„±, ì˜ˆì•½ ë“± ëª¨ë“  ê³¼ì •ì´ **ë¡œì»¬ì—ì„œ ì²˜ë¦¬**
- **ë†’ì€ ì»¤ìŠ¤í„°ë§ˆì´ì§•**: ì•Œë¦¼ì˜ **ìŠ¤íƒ€ì¼, ì†Œë¦¬, ë°˜ë³µ ì£¼ê¸°** ë“± ë‹¤ì–‘í•œ ì˜µì…˜ ì œê³µ
- **ì •êµí•œ ìŠ¤ì¼€ì¤„ë§**: ì¼íšŒì„±, ë§¤ì¼, ë§¤ì£¼, ë°˜ë³µ ì•Œë¦¼ ë“± ë‹¤ì–‘í•œ ì˜ˆì•½ ë°©ì‹ ì§€ì›
- **ë‹¤ì–‘í•œ í”Œë«í¼ ì§€ì›**: Android, iOS, macOS, Linux, Windows ì§€ì›  
   ë‹¨, ì¼ë¶€ í”Œë«í¼ì—ì„œëŠ” ê¸°ëŠ¥ ì œí•œ ìˆìŒ  
   (ì˜ˆ: **Windowsì—ì„œëŠ” ë°˜ë³µ ì•Œë¦¼ ë¯¸ì§€ì›**, **Linuxì—ì„œëŠ” ì˜ˆì•½ ì•Œë¦¼ ì œí•œ**)

â†’ **í•  ì¼, ì•ŒëŒ, ì•½ ë³µìš©, ë°˜ë³µ ì¼ì • ì•Œë¦¼** ë“± ì‚¬ìš©ì ë””ë°”ì´ìŠ¤ ê¸°ë°˜ ì´ë²¤íŠ¸ì— ì í•©

---

### âœ… ì–´ë–¤ ì•Œë¦¼ ì‹œìŠ¤í…œì„ ì„ íƒí•´ì•¼ í• ê¹Œ?

| ì¡°ê±´                                     | ì¶”ì²œ ì‹œìŠ¤í…œ                     |
| ---------------------------------------- | ------------------------------- |
| ì„œë²„ì—ì„œ ì‹¤ì‹œê°„ ë©”ì‹œì§€ ë°œì†¡ í•„ìš”         | **FCM**                         |
| ì•±ì´ êº¼ì ¸ ìˆì–´ë„ ì•Œë¦¼ ì „ë‹¬ í•„ìš”          | **FCM**                         |
| ë§ˆì¼€íŒ… ìº í˜ì¸, ì‚¬ìš©ì ë¦¬í…ì…˜ ì „ëµ        | **FCM**                         |
| ë””ë°”ì´ìŠ¤ ë‚´ ì•Œë¦¼ ì˜ˆì•½ (ì˜ˆ: ì•ŒëŒ, ì¼ì •)   | **Flutter Local Notifications** |
| ì˜¤í”„ë¼ì¸ í™˜ê²½ì—ì„œë„ ì•Œë¦¼ í•„ìš”            | **Flutter Local Notifications** |
| ì»¤ìŠ¤í„°ë§ˆì´ì§•ëœ UIë¡œ í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ í‘œì‹œ | **Flutter Local Notifications** |

---

### ğŸ’¡ í†µí•© ì „ëµ: FCM + Local Notifications

ë‘ ì‹œìŠ¤í…œì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ì¥ ìœ ì—°í•œ ì „ëµì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:

- **FCMìœ¼ë¡œ ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì‹ **
- ë°›ì€ ë©”ì‹œì§€ë¥¼ Flutter Local Notificationsë¡œ **ì‚¬ìš©ì ì •ì˜ UIë¡œ í‘œì‹œ**  
   â†’ íŠ¹íˆ **ì•±ì´ í¬ê·¸ë¼ìš´ë“œ ìƒíƒœ**ì¼ ë•Œ ìœ ìš©

ì´ëŸ° êµ¬ì¡°ëŠ” **ì•± ìƒíƒœì™€ ìƒê´€ì—†ì´ ì¼ê´€ëœ ì•Œë¦¼ ê²½í—˜**ì„ ì œê³µí•˜ê³ , ë™ì‹œì— **UIì™€ UX ì œì–´ê¶Œ**ì„ ê°œë°œìì—ê²Œ ë¶€ì—¬í•©ë‹ˆë‹¤.

---

### ğŸ“Œ ê²°ë¡ 

- FCM: **ì„œë²„ ê¸°ë°˜, ì›ê²© íŠ¸ë¦¬ê±°, ì‹¤ì‹œê°„ ëŒ€ì‘**
- Flutter Local Notifications: **ì˜¤í”„ë¼ì¸ ê°€ëŠ¥, ë¡œì»¬ ì˜ˆì•½, ë†’ì€ ì»¤ìŠ¤í„°ë§ˆì´ì§•**
- ë‘˜ì˜ **ì¡°í•©**ì´ ìµœìƒì˜ ì‚¬ìš©ì ê²½í—˜ê³¼ ê¸°ëŠ¥ì  ìœ ì—°ì„±ì„ ì œê³µí•¨

## ë‹¨ê³„ë³„ êµ¬í˜„ ê°€ì´ë“œ ë° ëª¨ë²” ì‚¬ë¡€

Flutter ì• í”Œë¦¬ì¼€ì´ì…˜ì— **FCM í‘¸ì‹œ ì•Œë¦¼**ì´ë‚˜ **Flutter Local Notifications**ë¥¼ êµ¬í˜„í•˜ë ¤ë©´ ì²´ê³„ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ë‘ ë°©ì‹ì— ëŒ€í•œ **êµ¬ì²´ì ì¸ ë‹¨ê³„ë³„ ê°€ì´ë“œì™€ ì‹¤ë¬´ íŒ**ì…ë‹ˆë‹¤.

---

## ğŸ”” FCM í‘¸ì‹œ ì•Œë¦¼ êµ¬í˜„ ê°€ì´ë“œ

1. **Firebase í”„ë¡œì íŠ¸ ìƒì„± ë° FCM í™œì„±í™”**  
   Firebase ì½˜ì†”ì—ì„œ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ê³  **Cloud Messaging**ì„ í™œì„±í™”í•©ë‹ˆë‹¤.
2. **ì•± ë“±ë¡ (Android/iOS)**  
   Androidì™€ iOS ì•±ì„ Firebaseì— ë“±ë¡í•©ë‹ˆë‹¤.

   - Android: `package name` ì…ë ¥
   - iOS: `bundle identifier` ì…ë ¥

3. **êµ¬ì„± íŒŒì¼ ë‹¤ìš´ë¡œë“œ**

   - Android: `google-services.json` â†’ `android/app/`
   - iOS: `GoogleService-Info.plist` â†’ `ios/Runner/`

4. **iOS APNs ì„¤ì •** (í•„ìš”í•œ ê²½ìš°)  
   Firebase Console > í”„ë¡œì íŠ¸ ì„¤ì • > Cloud Messagingì—ì„œ

   - `.p8 ì¸ì¦í‚¤` ì—…ë¡œë“œ
   - Apple ê°œë°œì ê³„ì •ì˜ **Key ID**, **Team ID** ì…ë ¥

5. **ì˜ì¡´ì„± ì¶”ê°€ (`pubspec.yaml`)**

   ```yaml
   dependencies:
     firebase_core: ...
     firebase_messaging: ...
   ```

6. **Firebase ì´ˆê¸°í™” (`main.dart`)**

   ```dart
   await Firebase.initializeApp();
   ```

7. **ì•Œë¦¼ ê¶Œí•œ ìš”ì²­**

   ```dart
   await FirebaseMessaging.instance.requestPermission();
   ```

8. **FCM í† í° ìˆ˜ì‹  ë° ì €ì¥**

   ```dart
   final token = await FirebaseMessaging.instance.getToken();
   FirebaseMessaging.instance.onTokenRefresh.listen(...);
   ```

9. **í…ŒìŠ¤íŠ¸ ì•Œë¦¼ ë°œì†¡**  
   Firebase ì½˜ì†”ì—ì„œ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ì—¬ ìˆ˜ì‹  í™•ì¸
10. **ìˆ˜ì‹  ë©”ì‹œì§€ ì²˜ë¦¬**

```dart
FirebaseMessaging.onMessage.listen(...);               // í¬ê·¸ë¼ìš´ë“œ
FirebaseMessaging.onBackgroundMessage(...);            // ë°±ê·¸ë¼ìš´ë“œ/ì¢…ë£Œ
FirebaseMessaging.onMessageOpenedApp.listen(...);      // ë°±ê·¸ë¼ìš´ë“œ ì•± í´ë¦­
FirebaseMessaging.instance.getInitialMessage();        // ì¢…ë£Œ ì•± í´ë¦­
```

11. **í”Œë«í¼ë³„ ì„¤ì • í™•ì¸**

    - Android: `AndroidManifest.xml` ì„¤ì •
    - iOS: Xcode ì„¤ì • ë° ê¶Œí•œ ì²˜ë¦¬

---

## ğŸ“± Flutter Local Notifications êµ¬í˜„ ê°€ì´ë“œ

1. **ì˜ì¡´ì„± ì¶”ê°€ (`pubspec.yaml`)**

   ```yaml
   dependencies:
     flutter_local_notifications: ...
   ```

2. **í”ŒëŸ¬ê·¸ì¸ ì´ˆê¸°í™”**

   - `FlutterLocalNotificationsPlugin` ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ì´ˆê¸°í™”
   - `AndroidInitializationSettings` ë° `IOSInitializationSettings` ì‚¬ìš©
   - ì•Œë¦¼ ê¶Œí•œ ìš”ì²­ í¬í•¨

3. **ê¸°ë³¸ ì•Œë¦¼ í‘œì‹œ**

   ```dart
   flutterLocalNotificationsPlugin.show(
     0, "ì œëª©", "ë‚´ìš©", NotificationDetails(...)
   );
   ```

4. **ì•Œë¦¼ ì˜ˆì•½ ì„¤ì •**

   - ì¼íšŒì„±: `zonedSchedule()` + `TZDateTime`
   - ë°˜ë³µ: `periodicallyShow()` ë˜ëŠ” `zonedSchedule()` + `matchDateTimeComponents`

5. **ì•Œë¦¼ ìŠ¤íƒ€ì¼ ë° ì†Œë¦¬ ì»¤ìŠ¤í„°ë§ˆì´ì§•**

   - Android: `AndroidNotificationDetails`  
      â†’ ì»¤ìŠ¤í…€ ì‚¬ìš´ë“œëŠ” `android/app/src/main/res/raw/`ì— ì €ì¥
   - iOS: `IOSNotificationDetails` ë˜ëŠ” `DarwinNotificationDetails`  
      â†’ ì•± ë²ˆë“¤ì— ì‚¬ìš´ë“œ íŒŒì¼ ì¶”ê°€

6. **ì•Œë¦¼ í´ë¦­ ì²˜ë¦¬**

   - ì´ˆê¸°í™” ì‹œ `onDidReceiveNotificationResponse` ì½œë°± ë“±ë¡
   - ì•±ì´ ì¢…ë£Œëœ ìƒíƒœì—ì„œ ì•Œë¦¼ í´ë¦­ ì‹œ `getNotificationAppLaunchDetails()` í™œìš©
   - payloadë¥¼ í†µí•´ íŠ¹ì • í™”ë©´ìœ¼ë¡œ ì´ë™

7. **í”Œë«í¼ë³„ êµ¬ì„± ì¶”ê°€**

   - Android: `AndroidManifest.xml`ì— ê¶Œí•œ ë° ë¦¬ì‹œë²„ ì¶”ê°€
   - iOS: `AppDelegate.swift`ì— í¬ê·¸ë¼ìš´ë“œ ì•Œë¦¼ ì²˜ë¦¬ ì½”ë“œ ì‘ì„±

8. **ê¸°ê¸°ì—ì„œ ì² ì €íˆ í…ŒìŠ¤íŠ¸**

   - ì•± ìƒíƒœë³„(í¬ê·¸ë¼ìš´ë“œ, ë°±ê·¸ë¼ìš´ë“œ, ì¢…ë£Œ)ë¡œ Android/iOS ëª¨ë‘ì—ì„œ ë™ì‘ í™•ì¸

---

## âœ… í‘¸ì‹œ ì•Œë¦¼ ëª¨ë²” ì‚¬ë¡€ (Best Practices)

- **ê¶Œí•œ ìš”ì²­ íƒ€ì´ë° ê³ ë ¤**  
   ì‚¬ìš©ìê°€ ê¸°ëŠ¥ì˜ í•„ìš”ì„±ì„ ëŠë¼ëŠ” ì‹œì ì— ê¶Œí•œì„ ìš”ì²­í•˜ê³  ëª…í™•íˆ ì„¤ëª…
- **ì‚¬ìš©ì ë§ì¶¤í™” & ì„¸ë¶„í™”**  
   ì‚¬ìš©ì í–‰ë™ ë° ì„ í˜¸ì— ê¸°ë°˜í•´ **ê´€ë ¨ì„± ë†’ì€ ì•Œë¦¼** ì œê³µ
- **ì ì ˆí•œ íƒ€ì´ë° ì„¤ì •**  
   ì‹œê°„ëŒ€ì™€ ì‚¬ìš©ì íŒ¨í„´ì„ ê³ ë ¤í•´ **ìµœì  ì‹œê°„ëŒ€**ì— ë°œì†¡
- **ê°„ê²°í•˜ê³  ëª…í™•í•˜ê²Œ**  
   í•µì‹¬ ë©”ì‹œì§€ + ê°•ë ¥í•œ í–‰ë™ ìœ ë„(Call To Action)
- **ë¦¬ì¹˜ ë¯¸ë””ì–´ í™œìš©**  
   ì´ë¯¸ì§€, ì´ëª¨ì§€, ì˜ìƒ ë“±ì„ í™œìš©í•´ ì‹œê°ì  í¥ë¯¸ ìœ ë„
- **ì•± ìƒíƒœë³„ ì•Œë¦¼ ì²˜ë¦¬ ì² ì €íˆ**  
   í¬ê·¸ë¼ìš´ë“œ/ë°±ê·¸ë¼ìš´ë“œ/ì¢…ë£Œ ìƒíƒœì— ë§ê²Œ **ì •í™•í•œ ì²˜ë¦¬ íë¦„ êµ¬í˜„**
- **ì—ëŸ¬ ì²˜ë¦¬ì™€ ë¡œê·¸ ê¸°ë¡**  
   ì˜¤ë¥˜ ë°œìƒ ì‹œ ì›ì¸ íŒŒì•…ì„ ìœ„í•œ **ë¡œê¹… ë° ì˜ˆì™¸ ì²˜ë¦¬ ì½”ë“œ** ì‘ì„±
- **ì˜µíŠ¸ì•„ì›ƒ ê¸°ëŠ¥ ì œê³µ**  
   ì‚¬ìš©ìê°€ ì‰½ê²Œ **ì•Œë¦¼ ìˆ˜ì‹  ê±°ë¶€**í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
- **ì„±ê³¼ ì¸¡ì • ë° ìµœì í™”**  
   **ì—´ëŒë¥ , í´ë¦­ë¥ ** ë“± ì£¼ìš” ì§€í‘œ ë¶„ì„ â†’ ë°ì´í„° ê¸°ë°˜ ê°œì„ 

---

ì´ ê°€ì´ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ FCM ë° Flutter Local Notificationsì„ íš¨ê³¼ì ìœ¼ë¡œ êµ¬ì„±í•˜ë©´, ì‚¬ìš©ìì—ê²Œ ì ì‹œì— ë§ì¶¤í˜• ì•Œë¦¼ì„ ì „ë‹¬í•˜ëŠ” **ê°•ë ¥í•œ ì•Œë¦¼ ì‹œìŠ¤í…œ**ì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Example code

### notification class

```dart
import 'dart:io';

import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:farmers_journal/gorouter_config.dart';
import 'package:farmers_journal/src/data/fcm_token_provider.dart';
import 'package:farmers_journal/src/presentation/controller/journal/journal_controller.dart';
import 'package:firebase_auth/firebase_auth.dart';
import 'package:firebase_messaging/firebase_messaging.dart';
import 'package:flutter/foundation.dart';
import 'package:flutter_local_notifications/flutter_local_notifications.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';

// TODO: Add token refresh listener.
class FlutterLocalNotification {
  // Private constructor. Prevents creating new instance from outside.
  // This is to implement FlutterNotification class with singleton pattern.  FlutterLocalNotification._();

  static FlutterLocalNotificationsPlugin flutterLocalNotificationsPlugin =
      FlutterLocalNotificationsPlugin();

  static init(WidgetRef ref) async {
    AndroidInitializationSettings androidInitializationSettings =
        const AndroidInitializationSettings('mipmap/ic_launcher');

    DarwinInitializationSettings iosInitializationSettings =
        const DarwinInitializationSettings(
      requestAlertPermission: false,
      requestBadgePermission: false,
      requestSoundPermission: false,
    );

    InitializationSettings initializationSettings = InitializationSettings(
      android: androidInitializationSettings,
      iOS: iosInitializationSettings,
    );
    requestNotificationPermission();
    FirebaseMessaging.onMessage.listen(_handleForeGroundMessage);
    FirebaseMessaging.onMessageOpenedApp.listen((message) async {
      if (kDebugMode) {
        debugPrint("Notification opened: ${message.notification?.title}");
      }
      // a single journal can be retrieved through journalId.
      final String journalId = message.data['journalId'];
      try {
        final journal = await ref
            .read(journalControllerProvider.notifier)
            .getJournal(journalId);

        router.goNamed('journal-detail',
            pathParameters: {"journalId": journalId}, extra: journal);
      } catch (error) {
        if (kDebugMode) {
          debugPrint(
              "Error occured while fetching journal with journalId $journalId");
          debugPrint("Error: $error}");
        }
      }
      ref.read(fcmTokenInitializerProvider);
    });
    try {
      await saveTokenToDatabase();
    } catch (e) {
      if (kDebugMode) {
        debugPrint(e.toString());
      }
    }
    await flutterLocalNotificationsPlugin.initialize(initializationSettings);
  }

  // Remote notification foreground handler
  static Future<void> _handleForeGroundMessage(RemoteMessage message) async {
    RemoteNotification? notification = message.notification;
    // You should debug how the data is actually being sent from the server.
    // In my case the firebase cloud functions.
    Map<String, dynamic> data = message.data; // data holds 'journalId'
    if (kDebugMode) {
      debugPrint('incoming foreground notification: ${data.toString()}');
    }
    await cancelNotification();
    await requestNotificationPermission();
    await showNotification(
        title: data['title'] ?? '', message: data['value'] ?? '');
  }

  // Remote notification background handler
  static Future<void> backgroundHandler(RemoteMessage message) async {
    RemoteNotification? notification = message.notification;
    Map<String, dynamic> data = message.data;
    if (kDebugMode) {
      debugPrint('incoming background notification ${data.toString()}');
    }
    await cancelNotification();
    await requestNotificationPermission();
    await showNotification(
        title: data['title'] ?? '', message: data['value'] ?? '');
  }

  static Future<void> saveTokenToDatabase() async {
    final user = FirebaseAuth.instance.currentUser;
    if (user == null) return;

    final token = await FirebaseMessaging.instance.getToken();

    final tokensRef = FirebaseFirestore.instance
        .collection('users')
        .doc(user.uid)
        .collection('tokens')
        .doc(token);

    await tokensRef.set({
      'token': token,
      'createdAt': FieldValue.serverTimestamp(), // Optional: for audit
      'platform': Platform.operatingSystem,
    });
  }

  static Future<void> cancelNotification() async {
    await flutterLocalNotificationsPlugin.cancelAll();
  }

  static requestNotificationPermission() {
    // Use generic to target specific platform.
    // iOS:IOSFlutterLocalNotificationsPlugin    flutterLocalNotificationsPlugin
        .resolvePlatformSpecificImplementation<
            IOSFlutterLocalNotificationsPlugin>()
        ?.requestPermissions(
            alert: true, badge: true, sound: true, provisional: true);

    // TODO: Set android settings as well.
    // Android:AndroidFlutterLocalNotificationsPlugin


  static Future<void> showNotification(
      {required String title, required message}) async {
    const AndroidNotificationDetails androidNotificationDetails =
        AndroidNotificationDetails(
      'channel_id',
      'channel_name',
      channelDescription: 'channel description',
      importance: Importance.max,
      priority: Priority.max,
      showWhen: false,
    );
    const DarwinNotificationDetails iosNotificationDetails =
        DarwinNotificationDetails(
      presentBanner: true,
      presentBadge: true,
      presentList: true,
      badgeNumber: 0,
    );

    const NotificationDetails notificationDetails = NotificationDetails(
        android: androidNotificationDetails, iOS: iosNotificationDetails);

    await flutterLocalNotificationsPlugin.show(
        0, title, message, notificationDetails);
  }
}
```

### entry point of the application, main.dart

```dart
// Flutter imports
import 'dart:async';

import 'package:farmers_journal/src/presentation/controller/theme/theme_controller.dart';
import 'package:firebase_messaging/firebase_messaging.dart';
import 'package:flutter/material.dart';

//Firebase imports
import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/services.dart';
import 'firebase_options.dart';

// pub import
import 'package:flex_color_scheme/flex_color_scheme.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:intl/date_symbol_data_local.dart';
import 'package:flutter_dotenv/flutter_dotenv.dart';
import 'package:kakao_flutter_sdk_common/kakao_flutter_sdk_common.dart';
import 'package:flutter_localizations/flutter_localizations.dart';

//config import
import 'package:farmers_journal/gorouter_config.dart';

// provider observer
import 'package:farmers_journal/src/data/my_observer.dart';

import 'notification.dart';

StreamController<String> streamController = StreamController.broadcast();

/// {@category Architecture}
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await SystemChrome.setEnabledSystemUIMode(SystemUiMode.edgeToEdge);
  await dotenv.load(fileName: ".env");
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );

  FirebaseMessaging.onBackgroundMessage(
      FlutterLocalNotification.backgroundHandler);

  KakaoSdk.init(
    nativeAppKey: dotenv.env['KAKAO_NATIVE_APP_KEY'],
    javaScriptAppKey: dotenv.env['KAKAO_JAVASCRIPT_KEY'],
  );

  initializeDateFormatting('ko_KR').then(
    (_) => runApp(
      ProviderScope(
        observers: [MyObserver()],
        child: const MyApp(),
      ),
    ),
  );
}

class MyApp extends ConsumerStatefulWidget {
  const MyApp({super.key});

  @override
  ConsumerState<ConsumerStatefulWidget> createState() => _MyApp();
}

class _MyApp extends ConsumerState<MyApp> {
  @override
  void initState() {
    super.initState();
    FlutterLocalNotification.init(ref);
  }

  @override
  void dispose() {
    streamController.close();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final themeRef = ref.watch(themeControllerProvider);

    return MaterialApp.router(
      localizationsDelegates: const [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: const [
        Locale('en'),
        Locale('ko'),
      ],
      routerConfig: router,
      debugShowCheckedModeBanner: false,
      themeMode: themeRef.maybeWhen(
          orElse: () => ThemeMode.system, data: (mode) => mode),
      darkTheme: FlexThemeData.dark(
        scheme: FlexScheme.green,
        surfaceMode: FlexSurfaceMode.levelSurfacesLowScaffold,
        blendLevel: 7,
        fontFamily: 'Pretandard',
        subThemesData: const FlexSubThemesData(
          blendOnLevel: 10,
          blendOnColors: false,
          useM2StyleDividerInM3: true,
          inputDecoratorBorderType: FlexInputBorderType.underline,
          inputDecoratorUnfocusedBorderIsColored: false,
        ),
        visualDensity: FlexColorScheme.comfortablePlatformDensity,
        useMaterial3: true,
        swapLegacyOnMaterial3: true,
      ),
      theme: FlexThemeData.light(
        scheme: FlexScheme.green,
        surfaceMode: FlexSurfaceMode.levelSurfacesLowScaffold,
        blendLevel: 7,
        fontFamily: 'Pretandard',
        subThemesData: const FlexSubThemesData(
          blendOnLevel: 10,
          blendOnColors: false,
          useM2StyleDividerInM3: true,
          inputDecoratorBorderType: FlexInputBorderType.underline,
          inputDecoratorUnfocusedBorderIsColored: false,
        ),
        visualDensity: FlexColorScheme.comfortablePlatformDensity,
        useMaterial3: true,
        swapLegacyOnMaterial3: true,
        // To use the playground font, add GoogleFonts package and uncomment
        // fontFamily: GoogleFonts.notoSans().fontFamily,      ),
    );
  }
}
```

### cloud function

```typescript
import { onDocumentCreated } from "firebase-functions/v2/firestore";
import { initializeApp } from "firebase-admin/app";
import { getFirestore, Timestamp } from "firebase-admin/firestore";
import { getMessaging } from "firebase-admin/messaging";

// Initialize Firebase AdmininitializeApp();

// Define interfaces for our data typesinterface JournalData {
  writerId: string;
  title?: string;
  content?: string;
  createdAt?: Timestamp;
  // Add other journal fields as needed}


interface FcmTokenData {
  token: string;
  createdAt: Timestamp;
  deviceId?: string;
  // Add other token fields as needed}

/**
 * Cloud Function that sends a notification to a journal writer when a comment is added * * Triggered when a document is created in the comments subcollection of a journal */
exports.notifyJournalWriter = onDocumentCreated("journals/{journalId}/comments/{commentId}", async (event)=>{
    debugger;

    const snapshot = event.data;
    if (!snapshot) {
        console.log("No data associated with the event");
        return;
        }
    const {journalId} = event.params;

    const db = getFirestore();
    const journalSnapshot = await db.collection("journals").doc(journalId).get();

    if (!journalSnapshot.exists) {
       console.log(`No journal found with ID: ${journalId}`);
       return;
    }
    const journalData = journalSnapshot.data() as JournalData;
    const writerId = journalData["writer"];
    const userFcmCollection = db.collection("users").doc(writerId).collection("tokens");
    const userFcmSnapshot = await userFcmCollection
        .orderBy("createdAt", "desc")
        .limit(1)
        .get();

    if (userFcmSnapshot.empty) {
        console.error(`No FCM tokens found for user: ${writerId}`);
        return;
        }

    const userFcmDoc = userFcmSnapshot.docs[0];
    const fcmData = userFcmDoc.data() as FcmTokenData;
    const fcmToken = fcmData.token;

    if (!fcmToken) {
        console.error(`FCM token is empty for user: ${writerId}`);
        return;
    }

    // Create notification message    const message = {
        notification: {
          title: "ëŒ“ê¸€ ì•Œë¦¼",
          body: "ë‚´ ê²Œì‹œë¬¼ì— ìƒˆë¡œìš´ ëŒ“ê¸€ì´ ë‹¬ë ¸ìŠµë‹ˆë‹¤.",
        },
        data: {
          journalId: journalId,
          click_action: "FLUTTER_NOTIFICATION_CLICK",
        },
        token: fcmToken,
      };

    // Send the notification    const messaging = getMessaging();
    try {
        const response = await messaging.send(message);
        console.log("Successfully sent notification:", response);
    } catch (error) {
        console.error("Error sending notification:", error);
    }
});
```

Fore more information about the topics listed above, visit official documentations and videos.

[Flutter_local_notifications](https://pub.dev/packages/flutter_local_notifications)

[Getting started with cloud functions](https://www.youtube.com/watch?v=2u6Zb36OQjM&list=LL&index=1&t=631s)

[Firebase cloud messaging](https://firebase.google.com/docs/cloud-messaging?_gl=1*166hl5u*_up*MQ..*_ga*MTY5ODgxNTc5LjE3NDczODgxMDQ.*_ga_CW55HF8NVT*czE3NDczODgxMDQkbzEkZzAkdDE3NDczODgxMDQkajAkbDAkaDA.)
